{
    "openapi":  "3.1.0",
    "info":  {
                 "title":  "HAMA API - Human-in-the-Loop AI 투자 시스템",
                 "description":  "# HAMA API Documentation\n\nHuman-in-the-Loop AI 투자 시스템 Backend API\n\n## 주요 기능\n- **Chat Interface**: AI 대화 및 실시간 Thinking Trace 스트리밍\n- **HITL (Human-in-the-Loop)**: 매매 승인 시스템\n- **Portfolio Management**: 포트폴리오 조회 및 차트 데이터\n- **Real-time Data**: Celery 기반 실시간 주가 캐싱\n\n## 인증\nPhase 1에서는 인증 없이 사용 가능합니다. (Phase 2에서 JWT 인증 추가 예정)\n\n## 에러 코드\n| Code | Message | HTTP Status |\n|------|---------|-------------|\n| `VALIDATION_ERROR` | 요청 데이터가 올바르지 않습니다 | 422 |\n| `NOT_FOUND` | 리소스를 찾을 수 없습니다 | 404 |\n| `RATE_LIMIT_EXCEEDED` | 요청이 너무 많습니다 | 429 |\n| `INTERNAL_SERVER_ERROR` | 서버 오류 | 500 |\n\n## 개발 환경\n- **Backend**: http://localhost:8000\n- **Swagger UI**: http://localhost:8000/docs\n- **ReDoc**: http://localhost:8000/redoc\n",
                 "version":  "v1"
             },
    "paths":  {
                  "/api/v1/chat/":  {
                                        "post":  {
                                                     "tags":  [
                                                                  "chat"
                                                              ],
                                                     "summary":  "Chat",
                                                     "description":  "메인 채팅 엔드포인트입니다.\n\n처리 흐름:\n1. 마스터 에이전트가 질의를 수신합니다.\n2. 적절한 서브 에이전트를 선택해 작업을 분배합니다.\n3. 서브 에이전트가 결과를 생성합니다.\n4. 마스터 에이전트가 결과를 통합합니다.\n5. HITL 조건을 확인하고 응답을 생성합니다.\n6. 중단 지점이 있는 경우 승인 요청을 반환합니다.",
                                                     "operationId":  "chat_api_v1_chat__post",
                                                     "requestBody":  {
                                                                         "content":  {
                                                                                         "application/json":  {
                                                                                                                  "schema":  {
                                                                                                                                 "$ref":  "#/components/schemas/ChatRequest"
                                                                                                                             }
                                                                                                              }
                                                                                     },
                                                                         "required":  true
                                                                     },
                                                     "responses":  {
                                                                       "200":  {
                                                                                   "description":  "Successful Response",
                                                                                   "content":  {
                                                                                                   "application/json":  {
                                                                                                                            "schema":  {
                                                                                                                                           "$ref":  "#/components/schemas/ChatResponse"
                                                                                                                                       }
                                                                                                                        }
                                                                                               }
                                                                               },
                                                                       "422":  {
                                                                                   "description":  "Validation Error",
                                                                                   "content":  {
                                                                                                   "application/json":  {
                                                                                                                            "schema":  {
                                                                                                                                           "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                       }
                                                                                                                        }
                                                                                               }
                                                                               }
                                                                   }
                                                 }
                                    },
                  "/api/v1/chat/history/{conversation_id}":  {
                                                                 "get":  {
                                                                             "tags":  [
                                                                                          "chat"
                                                                                      ],
                                                                             "summary":  "Get Chat History",
                                                                             "description":  "특정 대화의 메시지 히스토리를 조회합니다.",
                                                                             "operationId":  "get_chat_history_api_v1_chat_history__conversation_id__get",
                                                                             "parameters":  [
                                                                                                {
                                                                                                    "name":  "conversation_id",
                                                                                                    "in":  "path",
                                                                                                    "required":  true,
                                                                                                    "schema":  {
                                                                                                                   "type":  "string",
                                                                                                                   "title":  "Conversation Id"
                                                                                                               }
                                                                                                },
                                                                                                {
                                                                                                    "name":  "limit",
                                                                                                    "in":  "query",
                                                                                                    "required":  false,
                                                                                                    "schema":  {
                                                                                                                   "type":  "integer",
                                                                                                                   "maximum":  500,
                                                                                                                   "minimum":  1,
                                                                                                                   "default":  100,
                                                                                                                   "title":  "Limit"
                                                                                                               }
                                                                                                }
                                                                                            ],
                                                                             "responses":  {
                                                                                               "200":  {
                                                                                                           "description":  "Successful Response",
                                                                                                           "content":  {
                                                                                                                           "application/json":  {
                                                                                                                                                    "schema":  {

                                                                                                                                                               }
                                                                                                                                                }
                                                                                                                       }
                                                                                                       },
                                                                                               "422":  {
                                                                                                           "description":  "Validation Error",
                                                                                                           "content":  {
                                                                                                                           "application/json":  {
                                                                                                                                                    "schema":  {
                                                                                                                                                                   "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                                               }
                                                                                                                                                }
                                                                                                                       }
                                                                                                       }
                                                                                           }
                                                                         },
                                                                 "delete":  {
                                                                                "tags":  [
                                                                                             "chat"
                                                                                         ],
                                                                                "summary":  "Delete Chat History",
                                                                                "description":  "특정 대화 히스토리를 영구 삭제합니다.",
                                                                                "operationId":  "delete_chat_history_api_v1_chat_history__conversation_id__delete",
                                                                                "parameters":  [
                                                                                                   {
                                                                                                       "name":  "conversation_id",
                                                                                                       "in":  "path",
                                                                                                       "required":  true,
                                                                                                       "schema":  {
                                                                                                                      "type":  "string",
                                                                                                                      "title":  "Conversation Id"
                                                                                                                  }
                                                                                                   }
                                                                                               ],
                                                                                "responses":  {
                                                                                                  "200":  {
                                                                                                              "description":  "Successful Response",
                                                                                                              "content":  {
                                                                                                                              "application/json":  {
                                                                                                                                                       "schema":  {

                                                                                                                                                                  }
                                                                                                                                                   }
                                                                                                                          }
                                                                                                          },
                                                                                                  "422":  {
                                                                                                              "description":  "Validation Error",
                                                                                                              "content":  {
                                                                                                                              "application/json":  {
                                                                                                                                                       "schema":  {
                                                                                                                                                                      "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                                                  }
                                                                                                                                                   }
                                                                                                                          }
                                                                                                          }
                                                                                              }
                                                                            }
                                                             },
                  "/api/v1/chat/sessions":  {
                                                "get":  {
                                                            "tags":  [
                                                                         "chat"
                                                                     ],
                                                            "summary":  "List Chat Sessions",
                                                            "description":  "최근 활동 순으로 정렬된 채팅 세션 목록을 반환합니다.",
                                                            "operationId":  "list_chat_sessions_api_v1_chat_sessions_get",
                                                            "parameters":  [
                                                                               {
                                                                                   "name":  "limit",
                                                                                   "in":  "query",
                                                                                   "required":  false,
                                                                                   "schema":  {
                                                                                                  "type":  "integer",
                                                                                                  "maximum":  100,
                                                                                                  "minimum":  1,
                                                                                                  "default":  50,
                                                                                                  "title":  "Limit"
                                                                                              }
                                                                               }
                                                                           ],
                                                            "responses":  {
                                                                              "200":  {
                                                                                          "description":  "Successful Response",
                                                                                          "content":  {
                                                                                                          "application/json":  {
                                                                                                                                   "schema":  {
                                                                                                                                                  "type":  "array",
                                                                                                                                                  "items":  {
                                                                                                                                                                "$ref":  "#/components/schemas/ChatSessionSummary"
                                                                                                                                                            },
                                                                                                                                                  "title":  "Response List Chat Sessions Api V1 Chat Sessions Get"
                                                                                                                                              }
                                                                                                                               }
                                                                                                      }
                                                                                      },
                                                                              "422":  {
                                                                                          "description":  "Validation Error",
                                                                                          "content":  {
                                                                                                          "application/json":  {
                                                                                                                                   "schema":  {
                                                                                                                                                  "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                              }
                                                                                                                               }
                                                                                                      }
                                                                                      }
                                                                          }
                                                        }
                                            },
                  "/api/v1/chat/approve":  {
                                               "post":  {
                                                            "tags":  [
                                                                         "chat"
                                                                     ],
                                                            "summary":  "Approve Action",
                                                            "description":  "승인 혹은 거부 결정을 처리하는 엔드포인트입니다.\n\n처리 흐름:\n1. thread_id를 통해 중단된 그래프 상태를 조회합니다.\n2. 결정 값에 따라 Command(resume=...)를 전달합니다.\n3. 그래프를 재개하고 최종 결과를 반환합니다.",
                                                            "operationId":  "approve_action_api_v1_chat_approve_post",
                                                            "requestBody":  {
                                                                                "content":  {
                                                                                                "application/json":  {
                                                                                                                         "schema":  {
                                                                                                                                        "$ref":  "#/components/schemas/ApprovalRequest"
                                                                                                                                    }
                                                                                                                     }
                                                                                            },
                                                                                "required":  true
                                                                            },
                                                            "responses":  {
                                                                              "200":  {
                                                                                          "description":  "Successful Response",
                                                                                          "content":  {
                                                                                                          "application/json":  {
                                                                                                                                   "schema":  {
                                                                                                                                                  "$ref":  "#/components/schemas/ApprovalResponse"
                                                                                                                                              }
                                                                                                                               }
                                                                                                      }
                                                                                      },
                                                                              "422":  {
                                                                                          "description":  "Validation Error",
                                                                                          "content":  {
                                                                                                          "application/json":  {
                                                                                                                                   "schema":  {
                                                                                                                                                  "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                              }
                                                                                                                               }
                                                                                                      }
                                                                                      }
                                                                          }
                                                        }
                                           },
                  "/api/v1/chat/multi-stream":  {
                                                    "post":  {
                                                                 "tags":  [
                                                                              "chat"
                                                                          ],
                                                                 "summary":  "Multi Agent Stream",
                                                                 "description":  "멀티 에이전트 실행을 실시간으로 스트리밍\n\n**Master Agent가 여러 서브 에이전트를 조율하는 과정을 시각화**\n\n**응답 형식: Server-Sent Events (SSE)**\n\n**이벤트 타입:**\n- `master_start`: Master Agent 시작\n- `master_routing`: 어떤 에이전트들을 호출할지 결정\n- `agent_start`: 서브 에이전트 시작\n- `agent_node`: 에이전트 내부 노드 실행 상태\n- `agent_llm_start`: LLM 호출 시작\n- `agent_llm_end`: LLM 호출 완료\n- `agent_complete`: 서브 에이전트 완료\n- `master_aggregating`: Master가 결과 집계 중\n- `master_complete`: 전체 완료\n- `error`: 에러 발생\n- `done`: 스트리밍 종료\n\n**Frontend 사용 예시 (React):**\n```javascript\nconst [agentStatus, setAgentStatus] = useState({});\n\nconst eventSource = new EventSource(\u0027/api/v1/chat/multi-stream\u0027, {\n    method: \u0027POST\u0027,\n    body: JSON.stringify({\n        message: \u0027삼성전자 분석해줘\u0027,\n        user_id: \u0027user123\u0027\n    })\n});\n\neventSource.addEventListener(\u0027master_routing\u0027, (event) =\u003e {\n    const data = JSON.parse(event.data);\n    console.log(\u0027호출할 에이전트:\u0027, data.agents);\n    // UI에 표시: Research, Strategy, Risk 에이전트 활성화\n});\n\neventSource.addEventListener(\u0027agent_start\u0027, (event) =\u003e {\n    const data = JSON.parse(event.data);\n    setAgentStatus(prev =\u003e ({\n        ...prev,\n        [data.agent]: \u0027running\u0027\n    }));\n    // UI: Research Agent 카드에 \"실행 중\" 표시\n});\n\neventSource.addEventListener(\u0027agent_node\u0027, (event) =\u003e {\n    const data = JSON.parse(event.data);\n    console.log(`${data.agent} - ${data.node}: ${data.status}`);\n    // UI: \"데이터 수집 중...\", \"Bull 분석 중...\" 등 표시\n});\n\neventSource.addEventListener(\u0027agent_complete\u0027, (event) =\u003e {\n    const data = JSON.parse(event.data);\n    setAgentStatus(prev =\u003e ({\n        ...prev,\n        [data.agent]: \u0027complete\u0027\n    }));\n    console.log(\u0027결과:\u0027, data.result);\n    // UI: Research Agent 카드에 \"완료\" + 결과 요약 표시\n});\n\neventSource.addEventListener(\u0027master_complete\u0027, (event) =\u003e {\n    const data = JSON.parse(event.data);\n    console.log(\u0027최종 답변:\u0027, data.message);\n    // UI: 최종 답변 표시\n});\n\neventSource.addEventListener(\u0027done\u0027, (event) =\u003e {\n    eventSource.close();\n});\n```\n\n**Frontend UI 예시:**\n```\n[Master Agent]\n├─ 📊 Research Agent ✅\n│   ├─ collect_data ✅\n│   ├─ bull_analysis ✅\n│   ├─ bear_analysis ✅\n│   └─ consensus ✅\n│   결과: SELL, 목표가 90,000원\n│\n├─ 🎯 Strategy Agent ✅\n│   └─ 전략: MOMENTUM\n│\n└─ ⚠️ Risk Agent ✅\n    └─ 리스크: MEDIUM\n\n최종 답변: 현재 삼성전자는 SELL 추천입니다...\n```",
                                                                 "operationId":  "multi_agent_stream_api_v1_chat_multi_stream_post",
                                                                 "requestBody":  {
                                                                                     "content":  {
                                                                                                     "application/json":  {
                                                                                                                              "schema":  {
                                                                                                                                             "$ref":  "#/components/schemas/MultiAgentStreamRequest"
                                                                                                                                         }
                                                                                                                          }
                                                                                                 },
                                                                                     "required":  true
                                                                                 },
                                                                 "responses":  {
                                                                                   "200":  {
                                                                                               "description":  "Successful Response",
                                                                                               "content":  {
                                                                                                               "application/json":  {
                                                                                                                                        "schema":  {

                                                                                                                                                   }
                                                                                                                                    }
                                                                                                           }
                                                                                           },
                                                                                   "422":  {
                                                                                               "description":  "Validation Error",
                                                                                               "content":  {
                                                                                                               "application/json":  {
                                                                                                                                        "schema":  {
                                                                                                                                                       "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                                   }
                                                                                                                                    }
                                                                                                           }
                                                                                           }
                                                                               }
                                                             }
                                                },
                  "/api/v1/dashboard/":  {
                                             "get":  {
                                                         "tags":  [
                                                                      "dashboard"
                                                                  ],
                                                         "summary":  "Get Dashboard",
                                                         "description":  "대시보드 화면에 필요한 요약 정보를 제공합니다.",
                                                         "operationId":  "get_dashboard_api_v1_dashboard__get",
                                                         "responses":  {
                                                                           "200":  {
                                                                                       "description":  "Successful Response",
                                                                                       "content":  {
                                                                                                       "application/json":  {
                                                                                                                                "schema":  {
                                                                                                                                               "$ref":  "#/components/schemas/DashboardPayload"
                                                                                                                                           }
                                                                                                                            }
                                                                                                   }
                                                                                   }
                                                                       }
                                                     }
                                         },
                  "/api/v1/portfolio/":  {
                                             "get":  {
                                                         "tags":  [
                                                                      "portfolio"
                                                                  ],
                                                         "summary":  "Get Portfolio Overview",
                                                         "description":  "대시보드와 포트폴리오 화면에 필요한 요약 데이터를 제공합니다.",
                                                         "operationId":  "get_portfolio_overview_api_v1_portfolio__get",
                                                         "responses":  {
                                                                           "200":  {
                                                                                       "description":  "Successful Response",
                                                                                       "content":  {
                                                                                                       "application/json":  {
                                                                                                                                "schema":  {
                                                                                                                                               "$ref":  "#/components/schemas/PortfolioOverview"
                                                                                                                                           }
                                                                                                                            }
                                                                                                   }
                                                                                   }
                                                                       }
                                                     }
                                         },
                  "/api/v1/portfolio/{portfolio_id}":  {
                                                           "get":  {
                                                                       "tags":  [
                                                                                    "portfolio"
                                                                                ],
                                                                       "summary":  "Get Portfolio",
                                                                       "description":  "지정한 포트폴리오의 세부 정보를 조회합니다.",
                                                                       "operationId":  "get_portfolio_api_v1_portfolio__portfolio_id__get",
                                                                       "parameters":  [
                                                                                          {
                                                                                              "name":  "portfolio_id",
                                                                                              "in":  "path",
                                                                                              "required":  true,
                                                                                              "schema":  {
                                                                                                             "type":  "string",
                                                                                                             "title":  "Portfolio Id"
                                                                                                         }
                                                                                          }
                                                                                      ],
                                                                       "responses":  {
                                                                                         "200":  {
                                                                                                     "description":  "Successful Response",
                                                                                                     "content":  {
                                                                                                                     "application/json":  {
                                                                                                                                              "schema":  {
                                                                                                                                                             "$ref":  "#/components/schemas/PortfolioSummary"
                                                                                                                                                         }
                                                                                                                                          }
                                                                                                                 }
                                                                                                 },
                                                                                         "422":  {
                                                                                                     "description":  "Validation Error",
                                                                                                     "content":  {
                                                                                                                     "application/json":  {
                                                                                                                                              "schema":  {
                                                                                                                                                             "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                                         }
                                                                                                                                          }
                                                                                                                 }
                                                                                                 }
                                                                                     }
                                                                   }
                                                       },
                  "/api/v1/portfolio/{portfolio_id}/performance":  {
                                                                       "get":  {
                                                                                   "tags":  [
                                                                                                "portfolio"
                                                                                            ],
                                                                                   "summary":  "Get Portfolio Performance",
                                                                                   "description":  "지정한 포트폴리오의 성과 지표를 반환합니다.",
                                                                                   "operationId":  "get_portfolio_performance_api_v1_portfolio__portfolio_id__performance_get",
                                                                                   "parameters":  [
                                                                                                      {
                                                                                                          "name":  "portfolio_id",
                                                                                                          "in":  "path",
                                                                                                          "required":  true,
                                                                                                          "schema":  {
                                                                                                                         "type":  "string",
                                                                                                                         "title":  "Portfolio Id"
                                                                                                                     }
                                                                                                      }
                                                                                                  ],
                                                                                   "responses":  {
                                                                                                     "200":  {
                                                                                                                 "description":  "Successful Response",
                                                                                                                 "content":  {
                                                                                                                                 "application/json":  {
                                                                                                                                                          "schema":  {

                                                                                                                                                                     }
                                                                                                                                                      }
                                                                                                                             }
                                                                                                             },
                                                                                                     "422":  {
                                                                                                                 "description":  "Validation Error",
                                                                                                                 "content":  {
                                                                                                                                 "application/json":  {
                                                                                                                                                          "schema":  {
                                                                                                                                                                         "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                                                     }
                                                                                                                                                      }
                                                                                                                             }
                                                                                                             }
                                                                                                 }
                                                                               }
                                                                   },
                  "/api/v1/portfolio/chart-data":  {
                                                       "get":  {
                                                                   "tags":  [
                                                                                "portfolio"
                                                                            ],
                                                                   "summary":  "Get Portfolio Chart Data",
                                                                   "description":  "포트폴리오 차트용 데이터 (Treemap, Pie Chart)\n\n**Frontend 연동:**\n- Treemap: 종목별 비중 + 수익률 색상\n- Pie Chart: 섹터별 비중\n\n**Response:**\n```json\n{\n    \"stocks\": [\n        {\n            \"stock_code\": \"005930\",\n            \"stock_name\": \"삼성전자\",\n            \"quantity\": 10,\n            \"current_price\": 76300,\n            \"purchase_price\": 70000,\n            \"weight\": 0.35,\n            \"return_percent\": 9.0,\n            \"sector\": \"반도체\",\n            \"color\": \"#10B981\"\n        }\n    ],\n    \"total_value\": 10000000,\n    \"total_return\": 900000,\n    \"total_return_percent\": 9.0,\n    \"cash\": 1000000,\n    \"cash_weight\": 0.1,\n    \"sectors\": {\n        \"반도체\": {\n            \"weight\": 0.45,\n            \"value\": 4500000,\n            \"color\": \"#8B5CF6\"\n        },\n        \"배터리\": {\n            \"weight\": 0.30,\n            \"value\": 3000000,\n            \"color\": \"#F59E0B\"\n        },\n        \"현금\": {\n            \"weight\": 0.10,\n            \"value\": 1000000,\n            \"color\": \"#6B7280\"\n        }\n    }\n}\n```",
                                                                   "operationId":  "get_portfolio_chart_data_api_v1_portfolio_chart_data_get",
                                                                   "parameters":  [
                                                                                      {
                                                                                          "name":  "portfolio_id",
                                                                                          "in":  "query",
                                                                                          "required":  true,
                                                                                          "schema":  {
                                                                                                         "type":  "string",
                                                                                                         "title":  "Portfolio Id"
                                                                                                     }
                                                                                      }
                                                                                  ],
                                                                   "responses":  {
                                                                                     "200":  {
                                                                                                 "description":  "Successful Response",
                                                                                                 "content":  {
                                                                                                                 "application/json":  {
                                                                                                                                          "schema":  {

                                                                                                                                                     }
                                                                                                                                      }
                                                                                                             }
                                                                                             },
                                                                                     "422":  {
                                                                                                 "description":  "Validation Error",
                                                                                                 "content":  {
                                                                                                                 "application/json":  {
                                                                                                                                          "schema":  {
                                                                                                                                                         "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                                     }
                                                                                                                                      }
                                                                                                             }
                                                                                             }
                                                                                 }
                                                               }
                                                   },
                  "/api/v1/portfolio/{portfolio_id}/rebalance":  {
                                                                     "post":  {
                                                                                  "tags":  [
                                                                                               "portfolio"
                                                                                           ],
                                                                                  "summary":  "Rebalance Portfolio",
                                                                                  "description":  "포트폴리오 리밸런싱 제안과 예상 지표를 생성합니다.",
                                                                                  "operationId":  "rebalance_portfolio_api_v1_portfolio__portfolio_id__rebalance_post",
                                                                                  "parameters":  [
                                                                                                     {
                                                                                                         "name":  "portfolio_id",
                                                                                                         "in":  "path",
                                                                                                         "required":  true,
                                                                                                         "schema":  {
                                                                                                                        "type":  "string",
                                                                                                                        "title":  "Portfolio Id"
                                                                                                                    }
                                                                                                     }
                                                                                                 ],
                                                                                  "responses":  {
                                                                                                    "200":  {
                                                                                                                "description":  "Successful Response",
                                                                                                                "content":  {
                                                                                                                                "application/json":  {
                                                                                                                                                         "schema":  {

                                                                                                                                                                    }
                                                                                                                                                     }
                                                                                                                            }
                                                                                                            },
                                                                                                    "422":  {
                                                                                                                "description":  "Validation Error",
                                                                                                                "content":  {
                                                                                                                                "application/json":  {
                                                                                                                                                         "schema":  {
                                                                                                                                                                        "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                                                    }
                                                                                                                                                     }
                                                                                                                            }
                                                                                                            }
                                                                                                }
                                                                              }
                                                                 },
                  "/api/v1/stocks/search":  {
                                                "get":  {
                                                            "tags":  [
                                                                         "stocks"
                                                                     ],
                                                            "summary":  "Search Stocks",
                                                            "description":  "종목명 또는 종목코드로 주식을 검색합니다.",
                                                            "operationId":  "search_stocks_api_v1_stocks_search_get",
                                                            "parameters":  [
                                                                               {
                                                                                   "name":  "q",
                                                                                   "in":  "query",
                                                                                   "required":  true,
                                                                                   "schema":  {
                                                                                                  "type":  "string",
                                                                                                  "minLength":  1,
                                                                                                  "title":  "Q"
                                                                                              }
                                                                               },
                                                                               {
                                                                                   "name":  "market",
                                                                                   "in":  "query",
                                                                                   "required":  false,
                                                                                   "schema":  {
                                                                                                  "type":  "string",
                                                                                                  "default":  "KOSPI",
                                                                                                  "title":  "Market"
                                                                                              }
                                                                               }
                                                                           ],
                                                            "responses":  {
                                                                              "200":  {
                                                                                          "description":  "Successful Response",
                                                                                          "content":  {
                                                                                                          "application/json":  {
                                                                                                                                   "schema":  {

                                                                                                                                              }
                                                                                                                               }
                                                                                                      }
                                                                                      },
                                                                              "422":  {
                                                                                          "description":  "Validation Error",
                                                                                          "content":  {
                                                                                                          "application/json":  {
                                                                                                                                   "schema":  {
                                                                                                                                                  "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                              }
                                                                                                                               }
                                                                                                      }
                                                                                      }
                                                                          }
                                                        }
                                            },
                  "/api/v1/stocks/{stock_code}":  {
                                                      "get":  {
                                                                  "tags":  [
                                                                               "stocks"
                                                                           ],
                                                                  "summary":  "Get Stock Info",
                                                                  "description":  "특정 종목의 기본 정보를 조회합니다.",
                                                                  "operationId":  "get_stock_info_api_v1_stocks__stock_code__get",
                                                                  "parameters":  [
                                                                                     {
                                                                                         "name":  "stock_code",
                                                                                         "in":  "path",
                                                                                         "required":  true,
                                                                                         "schema":  {
                                                                                                        "type":  "string",
                                                                                                        "title":  "Stock Code"
                                                                                                    }
                                                                                     },
                                                                                     {
                                                                                         "name":  "market",
                                                                                         "in":  "query",
                                                                                         "required":  false,
                                                                                         "schema":  {
                                                                                                        "type":  "string",
                                                                                                        "default":  "KOSPI",
                                                                                                        "title":  "Market"
                                                                                                    }
                                                                                     }
                                                                                 ],
                                                                  "responses":  {
                                                                                    "200":  {
                                                                                                "description":  "Successful Response",
                                                                                                "content":  {
                                                                                                                "application/json":  {
                                                                                                                                         "schema":  {
                                                                                                                                                        "$ref":  "#/components/schemas/StockInfo"
                                                                                                                                                    }
                                                                                                                                     }
                                                                                                            }
                                                                                            },
                                                                                    "422":  {
                                                                                                "description":  "Validation Error",
                                                                                                "content":  {
                                                                                                                "application/json":  {
                                                                                                                                         "schema":  {
                                                                                                                                                        "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                                    }
                                                                                                                                     }
                                                                                                            }
                                                                                            }
                                                                                }
                                                              }
                                                  },
                  "/api/v1/stocks/{stock_code}/price-history":  {
                                                                    "get":  {
                                                                                "tags":  [
                                                                                             "stocks"
                                                                                         ],
                                                                                "summary":  "Get Price History",
                                                                                "description":  "특정 종목의 기간별 주가 히스토리를 반환합니다.",
                                                                                "operationId":  "get_price_history_api_v1_stocks__stock_code__price_history_get",
                                                                                "parameters":  [
                                                                                                   {
                                                                                                       "name":  "stock_code",
                                                                                                       "in":  "path",
                                                                                                       "required":  true,
                                                                                                       "schema":  {
                                                                                                                      "type":  "string",
                                                                                                                      "title":  "Stock Code"
                                                                                                                  }
                                                                                                   },
                                                                                                   {
                                                                                                       "name":  "days",
                                                                                                       "in":  "query",
                                                                                                       "required":  false,
                                                                                                       "schema":  {
                                                                                                                      "type":  "integer",
                                                                                                                      "maximum":  365,
                                                                                                                      "minimum":  1,
                                                                                                                      "default":  30,
                                                                                                                      "title":  "Days"
                                                                                                                  }
                                                                                                   }
                                                                                               ],
                                                                                "responses":  {
                                                                                                  "200":  {
                                                                                                              "description":  "Successful Response",
                                                                                                              "content":  {
                                                                                                                              "application/json":  {
                                                                                                                                                       "schema":  {

                                                                                                                                                                  }
                                                                                                                                                   }
                                                                                                                          }
                                                                                                          },
                                                                                                  "422":  {
                                                                                                              "description":  "Validation Error",
                                                                                                              "content":  {
                                                                                                                              "application/json":  {
                                                                                                                                                       "schema":  {
                                                                                                                                                                      "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                                                  }
                                                                                                                                                   }
                                                                                                                          }
                                                                                                          }
                                                                                              }
                                                                            }
                                                                },
                  "/api/v1/stocks/{stock_code}/analysis":  {
                                                               "get":  {
                                                                           "tags":  [
                                                                                        "stocks"
                                                                                    ],
                                                                           "summary":  "Get Stock Analysis",
                                                                           "description":  "리서치 에이전트를 호출해 종합 종목 분석을 제공합니다.",
                                                                           "operationId":  "get_stock_analysis_api_v1_stocks__stock_code__analysis_get",
                                                                           "parameters":  [
                                                                                              {
                                                                                                  "name":  "stock_code",
                                                                                                  "in":  "path",
                                                                                                  "required":  true,
                                                                                                  "schema":  {
                                                                                                                 "type":  "string",
                                                                                                                 "title":  "Stock Code"
                                                                                                             }
                                                                                              }
                                                                                          ],
                                                                           "responses":  {
                                                                                             "200":  {
                                                                                                         "description":  "Successful Response",
                                                                                                         "content":  {
                                                                                                                         "application/json":  {
                                                                                                                                                  "schema":  {

                                                                                                                                                             }
                                                                                                                                              }
                                                                                                                     }
                                                                                                     },
                                                                                             "422":  {
                                                                                                         "description":  "Validation Error",
                                                                                                         "content":  {
                                                                                                                         "application/json":  {
                                                                                                                                                  "schema":  {
                                                                                                                                                                 "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                                             }
                                                                                                                                              }
                                                                                                                     }
                                                                                                     }
                                                                                         }
                                                                       }
                                                           },
                  "/api/v1/settings/automation-level":  {
                                                            "get":  {
                                                                        "tags":  [
                                                                                     "settings"
                                                                                 ],
                                                                        "summary":  "Get Automation Level",
                                                                        "description":  "현재 자동화 레벨 조회\n\n자동화 레벨:\n- 1 (Pilot): AI가 거의 모든 것을 처리\n- 2 (Copilot): AI가 제안, 큰 결정만 승인 (기본값)\n- 3 (Advisor): AI는 정보만 제공, 사용자가 결정",
                                                                        "operationId":  "get_automation_level_api_v1_settings_automation_level_get",
                                                                        "responses":  {
                                                                                          "200":  {
                                                                                                      "description":  "Successful Response",
                                                                                                      "content":  {
                                                                                                                      "application/json":  {
                                                                                                                                               "schema":  {
                                                                                                                                                              "$ref":  "#/components/schemas/AutomationLevelResponse"
                                                                                                                                                          }
                                                                                                                                           }
                                                                                                                  }
                                                                                                  }
                                                                                      }
                                                                    },
                                                            "put":  {
                                                                        "tags":  [
                                                                                     "settings"
                                                                                 ],
                                                                        "summary":  "Update Automation Level",
                                                                        "description":  "자동화 레벨 변경\n\nRequest:\n```json\n{\n    \"level\": 3,\n    \"confirm\": true\n}\n```\n\n변경 영향:\n- Level 1 → 2: 향후 매매 시 승인 필요\n- Level 2 → 1: 향후 매매가 자동 실행 (고위험만 승인)\n- Level 2 → 3: 향후 모든 결정에 승인 필요",
                                                                        "operationId":  "update_automation_level_api_v1_settings_automation_level_put",
                                                                        "requestBody":  {
                                                                                            "content":  {
                                                                                                            "application/json":  {
                                                                                                                                     "schema":  {
                                                                                                                                                    "$ref":  "#/components/schemas/AutomationLevelUpdateRequest"
                                                                                                                                                }
                                                                                                                                 }
                                                                                                        },
                                                                                            "required":  true
                                                                                        },
                                                                        "responses":  {
                                                                                          "200":  {
                                                                                                      "description":  "Successful Response",
                                                                                                      "content":  {
                                                                                                                      "application/json":  {
                                                                                                                                               "schema":  {
                                                                                                                                                              "$ref":  "#/components/schemas/AutomationLevelUpdateResponse"
                                                                                                                                                          }
                                                                                                                                           }
                                                                                                                  }
                                                                                                  },
                                                                                          "422":  {
                                                                                                      "description":  "Validation Error",
                                                                                                      "content":  {
                                                                                                                      "application/json":  {
                                                                                                                                               "schema":  {
                                                                                                                                                              "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                                          }
                                                                                                                                           }
                                                                                                                  }
                                                                                                  }
                                                                                      }
                                                                    }
                                                        },
                  "/api/v1/settings/automation-levels":  {
                                                             "get":  {
                                                                         "tags":  [
                                                                                      "settings"
                                                                                  ],
                                                                         "summary":  "List Automation Levels",
                                                                         "description":  "사용 가능한 자동화 레벨 목록\n\nResponse:\n```json\n{\n    \"levels\": [\n        {\n            \"level\": 1,\n            \"name\": \"파일럿\",\n            \"description\": \"...\",\n            \"interrupt_points\": [...],\n            \"detail\": \"...\"\n        },\n        ...\n    ]\n}\n```",
                                                                         "operationId":  "list_automation_levels_api_v1_settings_automation_levels_get",
                                                                         "responses":  {
                                                                                           "200":  {
                                                                                                       "description":  "Successful Response",
                                                                                                       "content":  {
                                                                                                                       "application/json":  {
                                                                                                                                                "schema":  {

                                                                                                                                                           }
                                                                                                                                            }
                                                                                                                   }
                                                                                                   }
                                                                                       }
                                                                     }
                                                         },
                  "/api/v1/artifacts/":  {
                                             "post":  {
                                                          "tags":  [
                                                                       "artifacts"
                                                                   ],
                                                          "summary":  "Create Artifact",
                                                          "description":  "Artifact 생성\n\n**Request Body:**\n```json\n{\n    \"title\": \"삼성전자 분석 결과\",\n    \"content\": \"## 삼성전자 종합 분석\\n\\n### 재무 분석\\n...\",\n    \"artifact_type\": \"analysis\",\n    \"metadata\": {\n        \"stock_code\": \"005930\",\n        \"stock_name\": \"삼성전자\",\n        \"created_from_message_id\": \"550e8400-e29b-41d4-a716-446655440000\"\n    }\n}\n```\n\n**Artifact Types:**\n- `analysis`: 종목 분석 결과\n- `portfolio`: 포트폴리오 구성\n- `strategy`: 투자 전략\n- `research`: 리서치 보고서\n- `risk_report`: 리스크 분석\n\n**Response:**\n- 생성된 Artifact 전체 정보\n- `artifact_id`를 저장하여 나중에 조회/수정 가능",
                                                          "operationId":  "create_artifact_api_v1_artifacts__post",
                                                          "requestBody":  {
                                                                              "required":  true,
                                                                              "content":  {
                                                                                              "application/json":  {
                                                                                                                       "schema":  {
                                                                                                                                      "$ref":  "#/components/schemas/ArtifactCreate"
                                                                                                                                  }
                                                                                                                   }
                                                                                          }
                                                                          },
                                                          "responses":  {
                                                                            "201":  {
                                                                                        "description":  "Successful Response",
                                                                                        "content":  {
                                                                                                        "application/json":  {
                                                                                                                                 "schema":  {
                                                                                                                                                "$ref":  "#/components/schemas/ArtifactResponse"
                                                                                                                                            }
                                                                                                                             }
                                                                                                    }
                                                                                    },
                                                                            "422":  {
                                                                                        "description":  "Validation Error",
                                                                                        "content":  {
                                                                                                        "application/json":  {
                                                                                                                                 "schema":  {
                                                                                                                                                "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                            }
                                                                                                                             }
                                                                                                    }
                                                                                    }
                                                                        }
                                                      },
                                             "get":  {
                                                         "tags":  [
                                                                      "artifacts"
                                                                  ],
                                                         "summary":  "List Artifacts",
                                                         "description":  "Artifact 목록 조회\n\n**Query Parameters:**\n- `artifact_type` (선택): 특정 타입만 조회 (예: `analysis`)\n- `limit`: 페이지 크기 (기본값: 20, 최대: 100)\n- `offset`: 오프셋 (기본값: 0)\n\n**Response:**\n```json\n{\n    \"items\": [\n        {\n            \"artifact_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n            \"title\": \"삼성전자 분석 결과\",\n            \"artifact_type\": \"analysis\",\n            \"preview\": \"삼성전자 종합 분석: 재무 분석 결과...\",\n            \"created_at\": \"2025-10-26T10:00:00Z\"\n        }\n    ],\n    \"total\": 42,\n    \"limit\": 20,\n    \"offset\": 0\n}\n```\n\n**사용 예:**\n- 모든 Artifact: `GET /artifacts`\n- 분석만: `GET /artifacts?artifact_type=analysis`\n- 2페이지: `GET /artifacts?limit=20\u0026offset=20`",
                                                         "operationId":  "list_artifacts_api_v1_artifacts__get",
                                                         "parameters":  [
                                                                            {
                                                                                "name":  "artifact_type",
                                                                                "in":  "query",
                                                                                "required":  false,
                                                                                "schema":  {
                                                                                               "anyOf":  [
                                                                                                             {
                                                                                                                 "type":  "string"
                                                                                                             },
                                                                                                             {
                                                                                                                 "type":  "null"
                                                                                                             }
                                                                                                         ],
                                                                                               "description":  "필터링할 타입 (analysis, portfolio, strategy 등)",
                                                                                               "title":  "Artifact Type"
                                                                                           },
                                                                                "description":  "필터링할 타입 (analysis, portfolio, strategy 등)"
                                                                            },
                                                                            {
                                                                                "name":  "limit",
                                                                                "in":  "query",
                                                                                "required":  false,
                                                                                "schema":  {
                                                                                               "type":  "integer",
                                                                                               "maximum":  100,
                                                                                               "minimum":  1,
                                                                                               "description":  "페이지 크기",
                                                                                               "default":  20,
                                                                                               "title":  "Limit"
                                                                                           },
                                                                                "description":  "페이지 크기"
                                                                            },
                                                                            {
                                                                                "name":  "offset",
                                                                                "in":  "query",
                                                                                "required":  false,
                                                                                "schema":  {
                                                                                               "type":  "integer",
                                                                                               "minimum":  0,
                                                                                               "description":  "오프셋",
                                                                                               "default":  0,
                                                                                               "title":  "Offset"
                                                                                           },
                                                                                "description":  "오프셋"
                                                                            }
                                                                        ],
                                                         "responses":  {
                                                                           "200":  {
                                                                                       "description":  "Successful Response",
                                                                                       "content":  {
                                                                                                       "application/json":  {
                                                                                                                                "schema":  {
                                                                                                                                               "$ref":  "#/components/schemas/ArtifactListResponse"
                                                                                                                                           }
                                                                                                                            }
                                                                                                   }
                                                                                   },
                                                                           "422":  {
                                                                                       "description":  "Validation Error",
                                                                                       "content":  {
                                                                                                       "application/json":  {
                                                                                                                                "schema":  {
                                                                                                                                               "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                           }
                                                                                                                            }
                                                                                                   }
                                                                                   }
                                                                       }
                                                     }
                                         },
                  "/api/v1/artifacts/{artifact_id}":  {
                                                          "get":  {
                                                                      "tags":  [
                                                                                   "artifacts"
                                                                               ],
                                                                      "summary":  "Get Artifact",
                                                                      "description":  "Artifact 상세 조회\n\n**Path Parameters:**\n- `artifact_id`: Artifact UUID\n\n**Response:**\n- Artifact 전체 정보 (title, content, metadata 등)\n\n**에러:**\n- `404`: Artifact가 존재하지 않거나 삭제됨",
                                                                      "operationId":  "get_artifact_api_v1_artifacts__artifact_id__get",
                                                                      "parameters":  [
                                                                                         {
                                                                                             "name":  "artifact_id",
                                                                                             "in":  "path",
                                                                                             "required":  true,
                                                                                             "schema":  {
                                                                                                            "type":  "string",
                                                                                                            "format":  "uuid",
                                                                                                            "title":  "Artifact Id"
                                                                                                        }
                                                                                         }
                                                                                     ],
                                                                      "responses":  {
                                                                                        "200":  {
                                                                                                    "description":  "Successful Response",
                                                                                                    "content":  {
                                                                                                                    "application/json":  {
                                                                                                                                             "schema":  {
                                                                                                                                                            "$ref":  "#/components/schemas/ArtifactResponse"
                                                                                                                                                        }
                                                                                                                                         }
                                                                                                                }
                                                                                                },
                                                                                        "422":  {
                                                                                                    "description":  "Validation Error",
                                                                                                    "content":  {
                                                                                                                    "application/json":  {
                                                                                                                                             "schema":  {
                                                                                                                                                            "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                                        }
                                                                                                                                         }
                                                                                                                }
                                                                                                }
                                                                                    }
                                                                  },
                                                          "put":  {
                                                                      "tags":  [
                                                                                   "artifacts"
                                                                               ],
                                                                      "summary":  "Update Artifact",
                                                                      "description":  "Artifact 수정\n\n**Path Parameters:**\n- `artifact_id`: Artifact UUID\n\n**Request Body:**\n```json\n{\n    \"title\": \"삼성전자 분석 결과 (수정됨)\",\n    \"content\": \"## 업데이트된 분석\\n...\",\n    \"metadata\": {\n        \"updated_reason\": \"최신 재무제표 반영\"\n    }\n}\n```\n\n**참고:**\n- 수정하지 않을 필드는 생략 가능\n- `content` 수정 시 `preview`도 자동 업데이트\n\n**에러:**\n- `404`: Artifact가 존재하지 않음",
                                                                      "operationId":  "update_artifact_api_v1_artifacts__artifact_id__put",
                                                                      "parameters":  [
                                                                                         {
                                                                                             "name":  "artifact_id",
                                                                                             "in":  "path",
                                                                                             "required":  true,
                                                                                             "schema":  {
                                                                                                            "type":  "string",
                                                                                                            "format":  "uuid",
                                                                                                            "title":  "Artifact Id"
                                                                                                        }
                                                                                         }
                                                                                     ],
                                                                      "requestBody":  {
                                                                                          "required":  true,
                                                                                          "content":  {
                                                                                                          "application/json":  {
                                                                                                                                   "schema":  {
                                                                                                                                                  "$ref":  "#/components/schemas/ArtifactUpdate"
                                                                                                                                              }
                                                                                                                               }
                                                                                                      }
                                                                                      },
                                                                      "responses":  {
                                                                                        "200":  {
                                                                                                    "description":  "Successful Response",
                                                                                                    "content":  {
                                                                                                                    "application/json":  {
                                                                                                                                             "schema":  {
                                                                                                                                                            "$ref":  "#/components/schemas/ArtifactResponse"
                                                                                                                                                        }
                                                                                                                                         }
                                                                                                                }
                                                                                                },
                                                                                        "422":  {
                                                                                                    "description":  "Validation Error",
                                                                                                    "content":  {
                                                                                                                    "application/json":  {
                                                                                                                                             "schema":  {
                                                                                                                                                            "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                                        }
                                                                                                                                         }
                                                                                                                }
                                                                                                }
                                                                                    }
                                                                  },
                                                          "delete":  {
                                                                         "tags":  [
                                                                                      "artifacts"
                                                                                  ],
                                                                         "summary":  "Delete Artifact",
                                                                         "description":  "Artifact 삭제 (소프트 삭제)\n\n**Path Parameters:**\n- `artifact_id`: Artifact UUID\n\n**참고:**\n- 실제로는 소프트 삭제 (deleted_at 타임스탬프 설정)\n- 목록 조회 시 표시되지 않음\n\n**에러:**\n- `404`: Artifact가 존재하지 않음",
                                                                         "operationId":  "delete_artifact_api_v1_artifacts__artifact_id__delete",
                                                                         "parameters":  [
                                                                                            {
                                                                                                "name":  "artifact_id",
                                                                                                "in":  "path",
                                                                                                "required":  true,
                                                                                                "schema":  {
                                                                                                               "type":  "string",
                                                                                                               "format":  "uuid",
                                                                                                               "title":  "Artifact Id"
                                                                                                           }
                                                                                            }
                                                                                        ],
                                                                         "responses":  {
                                                                                           "204":  {
                                                                                                       "description":  "Successful Response"
                                                                                                   },
                                                                                           "422":  {
                                                                                                       "description":  "Validation Error",
                                                                                                       "content":  {
                                                                                                                       "application/json":  {
                                                                                                                                                "schema":  {
                                                                                                                                                               "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                                           }
                                                                                                                                            }
                                                                                                                   }
                                                                                                   }
                                                                                       }
                                                                     }
                                                      },
                  "/api/v1/approvals/":  {
                                             "get":  {
                                                         "tags":  [
                                                                      "approvals"
                                                                  ],
                                                         "summary":  "List Approval History",
                                                         "description":  "승인 이력 목록 조회\n\n**Query Parameters:**\n- `status` (선택): 상태별 필터링\n  - `pending`: 대기 중\n  - `approved`: 승인됨\n  - `rejected`: 거부됨\n  - `modified`: 수정 후 승인\n- `request_type` (선택): 요청 타입별 필터링 (예: `trade`, `rebalance`)\n- `limit`: 페이지 크기 (기본값: 20, 최대: 100)\n- `offset`: 오프셋 (기본값: 0)\n\n**Response:**\n```json\n{\n    \"items\": [\n        {\n            \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n            \"request_type\": \"trade\",\n            \"request_title\": \"삼성전자 매수 승인 요청\",\n            \"status\": \"approved\",\n            \"decision\": \"approved\",\n            \"created_at\": \"2025-10-26T10:00:00Z\",\n            \"decided_at\": \"2025-10-26T10:05:00Z\",\n            \"stock_code\": \"005930\",\n            \"action\": \"buy\",\n            \"amount\": 10000000\n        }\n    ],\n    \"total\": 42,\n    \"limit\": 20,\n    \"offset\": 0\n}\n```\n\n**사용 예:**\n- 모든 이력: `GET /approvals`\n- 대기 중만: `GET /approvals?status=pending`\n- 승인됨만: `GET /approvals?status=approved`\n- 매매 요청만: `GET /approvals?request_type=trade`\n- 2페이지: `GET /approvals?limit=20\u0026offset=20`",
                                                         "operationId":  "list_approval_history_api_v1_approvals__get",
                                                         "parameters":  [
                                                                            {
                                                                                "name":  "status",
                                                                                "in":  "query",
                                                                                "required":  false,
                                                                                "schema":  {
                                                                                               "anyOf":  [
                                                                                                             {
                                                                                                                 "type":  "string"
                                                                                                             },
                                                                                                             {
                                                                                                                 "type":  "null"
                                                                                                             }
                                                                                                         ],
                                                                                               "description":  "필터링할 상태 (pending, approved, rejected, modified)",
                                                                                               "title":  "Status"
                                                                                           },
                                                                                "description":  "필터링할 상태 (pending, approved, rejected, modified)"
                                                                            },
                                                                            {
                                                                                "name":  "request_type",
                                                                                "in":  "query",
                                                                                "required":  false,
                                                                                "schema":  {
                                                                                               "anyOf":  [
                                                                                                             {
                                                                                                                 "type":  "string"
                                                                                                             },
                                                                                                             {
                                                                                                                 "type":  "null"
                                                                                                             }
                                                                                                         ],
                                                                                               "description":  "필터링할 요청 타입 (trade, rebalance, strategy 등)",
                                                                                               "title":  "Request Type"
                                                                                           },
                                                                                "description":  "필터링할 요청 타입 (trade, rebalance, strategy 등)"
                                                                            },
                                                                            {
                                                                                "name":  "limit",
                                                                                "in":  "query",
                                                                                "required":  false,
                                                                                "schema":  {
                                                                                               "type":  "integer",
                                                                                               "maximum":  100,
                                                                                               "minimum":  1,
                                                                                               "description":  "페이지 크기",
                                                                                               "default":  20,
                                                                                               "title":  "Limit"
                                                                                           },
                                                                                "description":  "페이지 크기"
                                                                            },
                                                                            {
                                                                                "name":  "offset",
                                                                                "in":  "query",
                                                                                "required":  false,
                                                                                "schema":  {
                                                                                               "type":  "integer",
                                                                                               "minimum":  0,
                                                                                               "description":  "오프셋",
                                                                                               "default":  0,
                                                                                               "title":  "Offset"
                                                                                           },
                                                                                "description":  "오프셋"
                                                                            }
                                                                        ],
                                                         "responses":  {
                                                                           "200":  {
                                                                                       "description":  "Successful Response",
                                                                                       "content":  {
                                                                                                       "application/json":  {
                                                                                                                                "schema":  {
                                                                                                                                               "$ref":  "#/components/schemas/ApprovalHistoryListResponse"
                                                                                                                                           }
                                                                                                                            }
                                                                                                   }
                                                                                   },
                                                                           "422":  {
                                                                                       "description":  "Validation Error",
                                                                                       "content":  {
                                                                                                       "application/json":  {
                                                                                                                                "schema":  {
                                                                                                                                               "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                           }
                                                                                                                            }
                                                                                                   }
                                                                                   }
                                                                       }
                                                     }
                                         },
                  "/api/v1/approvals/{request_id}":  {
                                                         "get":  {
                                                                     "tags":  [
                                                                                  "approvals"
                                                                              ],
                                                                     "summary":  "Get Approval Detail",
                                                                     "description":  "승인 상세 정보 조회\n\n**Path Parameters:**\n- `request_id`: 승인 요청 UUID\n\n**Response:**\n```json\n{\n    \"request_id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"user_id\": \"660e8400-e29b-41d4-a716-446655440001\",\n    \"request_type\": \"trade\",\n    \"request_title\": \"삼성전자 매수 승인 요청\",\n    \"request_description\": \"AI가 분석한 매수 기회입니다.\",\n    \"status\": \"approved\",\n    \"proposed_actions\": {\n        \"action\": \"buy\",\n        \"stock_code\": \"005930\",\n        \"stock_name\": \"삼성전자\",\n        \"quantity\": 131,\n        \"price\": 76300,\n        \"total_amount\": 10000000\n    },\n    \"impact_analysis\": {\n        \"current_weight\": 0.25,\n        \"expected_weight\": 0.43,\n        \"expected_return\": 0.12\n    },\n    \"risk_warnings\": [\"단일 종목 집중도가 40%를 초과합니다\"],\n    \"alternatives\": {...},\n    \"created_at\": \"2025-10-26T10:00:00Z\",\n    \"responded_at\": \"2025-10-26T10:05:00Z\",\n    \"expires_at\": \"2025-10-26T12:00:00Z\",\n    \"decision\": \"approved\",\n    \"decided_at\": \"2025-10-26T10:05:00Z\",\n    \"selected_option\": \"original\",\n    \"modifications\": null,\n    \"user_notes\": \"분석 결과가 합리적임\"\n}\n```\n\n**에러:**\n- `404`: 승인 요청이 존재하지 않음",
                                                                     "operationId":  "get_approval_detail_api_v1_approvals__request_id__get",
                                                                     "parameters":  [
                                                                                        {
                                                                                            "name":  "request_id",
                                                                                            "in":  "path",
                                                                                            "required":  true,
                                                                                            "schema":  {
                                                                                                           "type":  "string",
                                                                                                           "format":  "uuid",
                                                                                                           "title":  "Request Id"
                                                                                                       }
                                                                                        }
                                                                                    ],
                                                                     "responses":  {
                                                                                       "200":  {
                                                                                                   "description":  "Successful Response",
                                                                                                   "content":  {
                                                                                                                   "application/json":  {
                                                                                                                                            "schema":  {
                                                                                                                                                           "$ref":  "#/components/schemas/ApprovalDetailResponse"
                                                                                                                                                       }
                                                                                                                                        }
                                                                                                               }
                                                                                               },
                                                                                       "422":  {
                                                                                                   "description":  "Validation Error",
                                                                                                   "content":  {
                                                                                                                   "application/json":  {
                                                                                                                                            "schema":  {
                                                                                                                                                           "$ref":  "#/components/schemas/HTTPValidationError"
                                                                                                                                                       }
                                                                                                                                        }
                                                                                                               }
                                                                                               }
                                                                                   }
                                                                 }
                                                     },
                  "/":  {
                            "get":  {
                                        "summary":  "Root",
                                        "description":  "애플리케이션 기본 상태를 확인하는 엔드포인트입니다.",
                                        "operationId":  "root__get",
                                        "responses":  {
                                                          "200":  {
                                                                      "description":  "Successful Response",
                                                                      "content":  {
                                                                                      "application/json":  {
                                                                                                               "schema":  {

                                                                                                                          }
                                                                                                           }
                                                                                  }
                                                                  }
                                                      }
                                    }
                        },
                  "/health":  {
                                  "get":  {
                                              "summary":  "Health",
                                              "description":  "데이터베이스 연결 여부 등 상세 상태를 확인하는 엔드포인트입니다.",
                                              "operationId":  "health_health_get",
                                              "responses":  {
                                                                "200":  {
                                                                            "description":  "Successful Response",
                                                                            "content":  {
                                                                                            "application/json":  {
                                                                                                                     "schema":  {

                                                                                                                                }
                                                                                                                 }
                                                                                        }
                                                                        }
                                                            }
                                          }
                              }
              },
    "components":  {
                       "schemas":  {
                                       "AccountConnection":  {
                                                                 "properties":  {
                                                                                    "broker":  {
                                                                                                   "type":  "string",
                                                                                                   "title":  "Broker"
                                                                                               },
                                                                                    "account_number":  {
                                                                                                           "type":  "string",
                                                                                                           "title":  "Account Number"
                                                                                                       },
                                                                                    "status":  {
                                                                                                   "type":  "string",
                                                                                                   "title":  "Status"
                                                                                               },
                                                                                    "last_synced_at":  {
                                                                                                           "anyOf":  [
                                                                                                                         {
                                                                                                                             "type":  "string"
                                                                                                                         },
                                                                                                                         {
                                                                                                                             "type":  "null"
                                                                                                                         }
                                                                                                                     ],
                                                                                                           "title":  "Last Synced At"
                                                                                                       }
                                                                                },
                                                                 "type":  "object",
                                                                 "required":  [
                                                                                  "broker",
                                                                                  "account_number",
                                                                                  "status"
                                                                              ],
                                                                 "title":  "AccountConnection",
                                                                 "description":  "증권 계좌 연결 상태 정보"
                                                             },
                                       "ActivityItem":  {
                                                            "properties":  {
                                                                               "id":  {
                                                                                          "type":  "string",
                                                                                          "title":  "Id"
                                                                                      },
                                                                               "type":  {
                                                                                            "type":  "string",
                                                                                            "title":  "Type"
                                                                                        },
                                                                               "icon":  {
                                                                                            "type":  "string",
                                                                                            "title":  "Icon"
                                                                                        },
                                                                               "title":  {
                                                                                             "type":  "string",
                                                                                             "title":  "Title"
                                                                                         },
                                                                               "description":  {
                                                                                                   "type":  "string",
                                                                                                   "title":  "Description"
                                                                                               },
                                                                               "timestamp":  {
                                                                                                 "anyOf":  [
                                                                                                               {
                                                                                                                   "type":  "string"
                                                                                                               },
                                                                                                               {
                                                                                                                   "type":  "null"
                                                                                                               }
                                                                                                           ],
                                                                                                 "title":  "Timestamp"
                                                                                             },
                                                                               "status":  {
                                                                                              "type":  "string",
                                                                                              "title":  "Status"
                                                                                          },
                                                                               "amount":  {
                                                                                              "anyOf":  [
                                                                                                            {
                                                                                                                "type":  "number"
                                                                                                            },
                                                                                                            {
                                                                                                                "type":  "null"
                                                                                                            }
                                                                                                        ],
                                                                                              "title":  "Amount"
                                                                                          }
                                                                           },
                                                            "type":  "object",
                                                            "required":  [
                                                                             "id",
                                                                             "type",
                                                                             "icon",
                                                                             "title",
                                                                             "description",
                                                                             "status"
                                                                         ],
                                                            "title":  "ActivityItem",
                                                            "description":  "최근 활동 이력"
                                                        },
                                       "AllocationItem":  {
                                                              "properties":  {
                                                                                 "name":  {
                                                                                              "type":  "string",
                                                                                              "title":  "Name"
                                                                                          },
                                                                                 "value":  {
                                                                                               "type":  "number",
                                                                                               "title":  "Value"
                                                                                           },
                                                                                 "percentage":  {
                                                                                                    "type":  "number",
                                                                                                    "title":  "Percentage"
                                                                                                }
                                                                             },
                                                              "type":  "object",
                                                              "required":  [
                                                                               "name",
                                                                               "value",
                                                                               "percentage"
                                                                           ],
                                                              "title":  "AllocationItem",
                                                              "description":  "배분 정보 항목"
                                                          },
                                       "ApprovalDetailResponse":  {
                                                                      "properties":  {
                                                                                         "request_id":  {
                                                                                                            "type":  "string",
                                                                                                            "format":  "uuid",
                                                                                                            "title":  "Request Id"
                                                                                                        },
                                                                                         "user_id":  {
                                                                                                         "type":  "string",
                                                                                                         "format":  "uuid",
                                                                                                         "title":  "User Id"
                                                                                                     },
                                                                                         "request_type":  {
                                                                                                              "type":  "string",
                                                                                                              "title":  "Request Type"
                                                                                                          },
                                                                                         "request_title":  {
                                                                                                               "type":  "string",
                                                                                                               "title":  "Request Title"
                                                                                                           },
                                                                                         "request_description":  {
                                                                                                                     "anyOf":  [
                                                                                                                                   {
                                                                                                                                       "type":  "string"
                                                                                                                                   },
                                                                                                                                   {
                                                                                                                                       "type":  "null"
                                                                                                                                   }
                                                                                                                               ],
                                                                                                                     "title":  "Request Description"
                                                                                                                 },
                                                                                         "status":  {
                                                                                                        "type":  "string",
                                                                                                        "title":  "Status"
                                                                                                    },
                                                                                         "proposed_actions":  {
                                                                                                                  "additionalProperties":  true,
                                                                                                                  "type":  "object",
                                                                                                                  "title":  "Proposed Actions"
                                                                                                              },
                                                                                         "impact_analysis":  {
                                                                                                                 "anyOf":  [
                                                                                                                               {
                                                                                                                                   "additionalProperties":  true,
                                                                                                                                   "type":  "object"
                                                                                                                               },
                                                                                                                               {
                                                                                                                                   "type":  "null"
                                                                                                                               }
                                                                                                                           ],
                                                                                                                 "title":  "Impact Analysis"
                                                                                                             },
                                                                                         "risk_warnings":  {
                                                                                                               "anyOf":  [
                                                                                                                             {
                                                                                                                                 "items":  {
                                                                                                                                               "type":  "string"
                                                                                                                                           },
                                                                                                                                 "type":  "array"
                                                                                                                             },
                                                                                                                             {
                                                                                                                                 "type":  "null"
                                                                                                                             }
                                                                                                                         ],
                                                                                                               "title":  "Risk Warnings"
                                                                                                           },
                                                                                         "alternatives":  {
                                                                                                              "anyOf":  [
                                                                                                                            {
                                                                                                                                "additionalProperties":  true,
                                                                                                                                "type":  "object"
                                                                                                                            },
                                                                                                                            {
                                                                                                                                "type":  "null"
                                                                                                                            }
                                                                                                                        ],
                                                                                                              "title":  "Alternatives"
                                                                                                          },
                                                                                         "created_at":  {
                                                                                                            "type":  "string",
                                                                                                            "format":  "date-time",
                                                                                                            "title":  "Created At"
                                                                                                        },
                                                                                         "responded_at":  {
                                                                                                              "anyOf":  [
                                                                                                                            {
                                                                                                                                "type":  "string",
                                                                                                                                "format":  "date-time"
                                                                                                                            },
                                                                                                                            {
                                                                                                                                "type":  "null"
                                                                                                                            }
                                                                                                                        ],
                                                                                                              "title":  "Responded At"
                                                                                                          },
                                                                                         "expires_at":  {
                                                                                                            "anyOf":  [
                                                                                                                          {
                                                                                                                              "type":  "string",
                                                                                                                              "format":  "date-time"
                                                                                                                          },
                                                                                                                          {
                                                                                                                              "type":  "null"
                                                                                                                          }
                                                                                                                      ],
                                                                                                            "title":  "Expires At"
                                                                                                        },
                                                                                         "decision":  {
                                                                                                          "anyOf":  [
                                                                                                                        {
                                                                                                                            "type":  "string"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type":  "null"
                                                                                                                        }
                                                                                                                    ],
                                                                                                          "title":  "Decision"
                                                                                                      },
                                                                                         "decided_at":  {
                                                                                                            "anyOf":  [
                                                                                                                          {
                                                                                                                              "type":  "string",
                                                                                                                              "format":  "date-time"
                                                                                                                          },
                                                                                                                          {
                                                                                                                              "type":  "null"
                                                                                                                          }
                                                                                                                      ],
                                                                                                            "title":  "Decided At"
                                                                                                        },
                                                                                         "selected_option":  {
                                                                                                                 "anyOf":  [
                                                                                                                               {
                                                                                                                                   "type":  "string"
                                                                                                                               },
                                                                                                                               {
                                                                                                                                   "type":  "null"
                                                                                                                               }
                                                                                                                           ],
                                                                                                                 "title":  "Selected Option"
                                                                                                             },
                                                                                         "modifications":  {
                                                                                                               "anyOf":  [
                                                                                                                             {
                                                                                                                                 "additionalProperties":  true,
                                                                                                                                 "type":  "object"
                                                                                                                             },
                                                                                                                             {
                                                                                                                                 "type":  "null"
                                                                                                                             }
                                                                                                                         ],
                                                                                                               "title":  "Modifications"
                                                                                                           },
                                                                                         "user_notes":  {
                                                                                                            "anyOf":  [
                                                                                                                          {
                                                                                                                              "type":  "string"
                                                                                                                          },
                                                                                                                          {
                                                                                                                              "type":  "null"
                                                                                                                          }
                                                                                                                      ],
                                                                                                            "title":  "User Notes"
                                                                                                        }
                                                                                     },
                                                                      "type":  "object",
                                                                      "required":  [
                                                                                       "request_id",
                                                                                       "user_id",
                                                                                       "request_type",
                                                                                       "request_title",
                                                                                       "request_description",
                                                                                       "status",
                                                                                       "proposed_actions",
                                                                                       "impact_analysis",
                                                                                       "risk_warnings",
                                                                                       "alternatives",
                                                                                       "created_at",
                                                                                       "responded_at",
                                                                                       "expires_at"
                                                                                   ],
                                                                      "title":  "ApprovalDetailResponse",
                                                                      "description":  "승인 상세 정보 응답",
                                                                      "example":  {
                                                                                      "alternatives":  {
                                                                                                           "option1":  {
                                                                                                                           "description":  "수량을 50% 줄여서 매수"
                                                                                                                       },
                                                                                                           "option2":  {
                                                                                                                           "description":  "다른 종목으로 분산"
                                                                                                                       }
                                                                                                       },
                                                                                      "created_at":  "2025-10-26T10:00:00Z",
                                                                                      "decided_at":  "2025-10-26T10:05:00Z",
                                                                                      "decision":  "approved",
                                                                                      "expires_at":  "2025-10-26T12:00:00Z",
                                                                                      "impact_analysis":  {
                                                                                                              "current_weight":  0.25,
                                                                                                              "expected_return":  0.12,
                                                                                                              "expected_weight":  0.43
                                                                                                          },
                                                                                      "proposed_actions":  {
                                                                                                               "action":  "buy",
                                                                                                               "price":  76300,
                                                                                                               "quantity":  131,
                                                                                                               "stock_code":  "005930",
                                                                                                               "stock_name":  "삼성전자",
                                                                                                               "total_amount":  10000000
                                                                                                           },
                                                                                      "request_description":  "AI가 분석한 매수 기회입니다.",
                                                                                      "request_id":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                      "request_title":  "삼성전자 매수 승인 요청",
                                                                                      "request_type":  "trade",
                                                                                      "responded_at":  "2025-10-26T10:05:00Z",
                                                                                      "risk_warnings":  [
                                                                                                            "단일 종목 집중도가 40%를 초과합니다"
                                                                                                        ],
                                                                                      "selected_option":  "original",
                                                                                      "status":  "approved",
                                                                                      "user_id":  "660e8400-e29b-41d4-a716-446655440001",
                                                                                      "user_notes":  "분석 결과가 합리적임"
                                                                                  }
                                                                  },
                                       "ApprovalHistoryItem":  {
                                                                   "properties":  {
                                                                                      "request_id":  {
                                                                                                         "type":  "string",
                                                                                                         "format":  "uuid",
                                                                                                         "title":  "Request Id"
                                                                                                     },
                                                                                      "request_type":  {
                                                                                                           "type":  "string",
                                                                                                           "title":  "Request Type"
                                                                                                       },
                                                                                      "request_title":  {
                                                                                                            "type":  "string",
                                                                                                            "title":  "Request Title"
                                                                                                        },
                                                                                      "status":  {
                                                                                                     "type":  "string",
                                                                                                     "title":  "Status"
                                                                                                 },
                                                                                      "decision":  {
                                                                                                       "anyOf":  [
                                                                                                                     {
                                                                                                                         "type":  "string"
                                                                                                                     },
                                                                                                                     {
                                                                                                                         "type":  "null"
                                                                                                                     }
                                                                                                                 ],
                                                                                                       "title":  "Decision"
                                                                                                   },
                                                                                      "created_at":  {
                                                                                                         "type":  "string",
                                                                                                         "format":  "date-time",
                                                                                                         "title":  "Created At"
                                                                                                     },
                                                                                      "decided_at":  {
                                                                                                         "anyOf":  [
                                                                                                                       {
                                                                                                                           "type":  "string",
                                                                                                                           "format":  "date-time"
                                                                                                                       },
                                                                                                                       {
                                                                                                                           "type":  "null"
                                                                                                                       }
                                                                                                                   ],
                                                                                                         "title":  "Decided At"
                                                                                                     },
                                                                                      "stock_code":  {
                                                                                                         "anyOf":  [
                                                                                                                       {
                                                                                                                           "type":  "string"
                                                                                                                       },
                                                                                                                       {
                                                                                                                           "type":  "null"
                                                                                                                       }
                                                                                                                   ],
                                                                                                         "title":  "Stock Code"
                                                                                                     },
                                                                                      "action":  {
                                                                                                     "anyOf":  [
                                                                                                                   {
                                                                                                                       "type":  "string"
                                                                                                                   },
                                                                                                                   {
                                                                                                                       "type":  "null"
                                                                                                                   }
                                                                                                               ],
                                                                                                     "title":  "Action"
                                                                                                 },
                                                                                      "amount":  {
                                                                                                     "anyOf":  [
                                                                                                                   {
                                                                                                                       "type":  "integer"
                                                                                                                   },
                                                                                                                   {
                                                                                                                       "type":  "null"
                                                                                                                   }
                                                                                                               ],
                                                                                                     "title":  "Amount"
                                                                                                 }
                                                                                  },
                                                                   "type":  "object",
                                                                   "required":  [
                                                                                    "request_id",
                                                                                    "request_type",
                                                                                    "request_title",
                                                                                    "status",
                                                                                    "created_at"
                                                                                ],
                                                                   "title":  "ApprovalHistoryItem",
                                                                   "description":  "승인 이력 목록 아이템",
                                                                   "example":  {
                                                                                   "action":  "buy",
                                                                                   "amount":  10000000,
                                                                                   "created_at":  "2025-10-26T10:00:00Z",
                                                                                   "decided_at":  "2025-10-26T10:05:00Z",
                                                                                   "decision":  "approved",
                                                                                   "request_id":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                   "request_title":  "삼성전자 매수 승인 요청",
                                                                                   "request_type":  "trade",
                                                                                   "status":  "approved",
                                                                                   "stock_code":  "005930"
                                                                               }
                                                               },
                                       "ApprovalHistoryListResponse":  {
                                                                           "properties":  {
                                                                                              "items":  {
                                                                                                            "items":  {
                                                                                                                          "$ref":  "#/components/schemas/ApprovalHistoryItem"
                                                                                                                      },
                                                                                                            "type":  "array",
                                                                                                            "title":  "Items"
                                                                                                        },
                                                                                              "total":  {
                                                                                                            "type":  "integer",
                                                                                                            "title":  "Total"
                                                                                                        },
                                                                                              "limit":  {
                                                                                                            "type":  "integer",
                                                                                                            "title":  "Limit"
                                                                                                        },
                                                                                              "offset":  {
                                                                                                             "type":  "integer",
                                                                                                             "title":  "Offset"
                                                                                                         }
                                                                                          },
                                                                           "type":  "object",
                                                                           "required":  [
                                                                                            "items",
                                                                                            "total",
                                                                                            "limit",
                                                                                            "offset"
                                                                                        ],
                                                                           "title":  "ApprovalHistoryListResponse",
                                                                           "description":  "승인 이력 목록 응답",
                                                                           "example":  {
                                                                                           "items":  [
                                                                                                         {
                                                                                                             "action":  "buy",
                                                                                                             "amount":  10000000,
                                                                                                             "created_at":  "2025-10-26T10:00:00Z",
                                                                                                             "decided_at":  "2025-10-26T10:05:00Z",
                                                                                                             "decision":  "approved",
                                                                                                             "request_id":  "550e8400-e29b-41d4-a716-446655440000",
                                                                                                             "request_title":  "삼성전자 매수 승인 요청",
                                                                                                             "request_type":  "trade",
                                                                                                             "status":  "approved",
                                                                                                             "stock_code":  "005930"
                                                                                                         }
                                                                                                     ],
                                                                                           "limit":  20,
                                                                                           "offset":  0,
                                                                                           "total":  42
                                                                                       }
                                                                       },
                                       "ApprovalRequest":  {
                                                               "properties":  {
                                                                                  "thread_id":  {
                                                                                                    "type":  "string",
                                                                                                    "title":  "Thread Id",
                                                                                                    "description":  "대화 스레드 ID"
                                                                                                },
                                                                                  "decision":  {
                                                                                                   "type":  "string",
                                                                                                   "title":  "Decision",
                                                                                                   "description":  "승인 결정: approved, rejected, modified"
                                                                                               },
                                                                                  "automation_level":  {
                                                                                                           "type":  "integer",
                                                                                                           "maximum":  3.0,
                                                                                                           "minimum":  1.0,
                                                                                                           "title":  "Automation Level",
                                                                                                           "default":  2
                                                                                                       },
                                                                                  "modifications":  {
                                                                                                        "anyOf":  [
                                                                                                                      {
                                                                                                                          "additionalProperties":  true,
                                                                                                                          "type":  "object"
                                                                                                                      },
                                                                                                                      {
                                                                                                                          "type":  "null"
                                                                                                                      }
                                                                                                                  ],
                                                                                                        "title":  "Modifications"
                                                                                                    },
                                                                                  "user_notes":  {
                                                                                                     "anyOf":  [
                                                                                                                   {
                                                                                                                       "type":  "string"
                                                                                                                   },
                                                                                                                   {
                                                                                                                       "type":  "null"
                                                                                                                   }
                                                                                                               ],
                                                                                                     "title":  "User Notes"
                                                                                                 }
                                                                              },
                                                               "type":  "object",
                                                               "required":  [
                                                                                "thread_id",
                                                                                "decision"
                                                                            ],
                                                               "title":  "ApprovalRequest",
                                                               "description":  "승인 요청 스키마"
                                                           },
                                       "ApprovalResponse":  {
                                                                "properties":  {
                                                                                   "status":  {
                                                                                                  "type":  "string",
                                                                                                  "title":  "Status"
                                                                                              },
                                                                                   "message":  {
                                                                                                   "type":  "string",
                                                                                                   "title":  "Message"
                                                                                               },
                                                                                   "conversation_id":  {
                                                                                                           "type":  "string",
                                                                                                           "title":  "Conversation Id"
                                                                                                       },
                                                                                   "result":  {
                                                                                                  "anyOf":  [
                                                                                                                {
                                                                                                                    "additionalProperties":  true,
                                                                                                                    "type":  "object"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type":  "null"
                                                                                                                }
                                                                                                            ],
                                                                                                  "title":  "Result"
                                                                                              }
                                                                               },
                                                                "type":  "object",
                                                                "required":  [
                                                                                 "status",
                                                                                 "message",
                                                                                 "conversation_id"
                                                                             ],
                                                                "title":  "ApprovalResponse",
                                                                "description":  "승인 응답 스키마"
                                                            },
                                       "ArtifactCreate":  {
                                                              "properties":  {
                                                                                 "title":  {
                                                                                               "type":  "string",
                                                                                               "maxLength":  500,
                                                                                               "minLength":  1,
                                                                                               "title":  "Title",
                                                                                               "description":  "Artifact 제목"
                                                                                           },
                                                                                 "content":  {
                                                                                                 "type":  "string",
                                                                                                 "minLength":  1,
                                                                                                 "title":  "Content",
                                                                                                 "description":  "Markdown 형식의 콘텐츠"
                                                                                             },
                                                                                 "artifact_type":  {
                                                                                                       "type":  "string",
                                                                                                       "title":  "Artifact Type",
                                                                                                       "description":  "Artifact 타입 (analysis, portfolio, strategy, research, risk_report)"
                                                                                                   },
                                                                                 "metadata":  {
                                                                                                  "anyOf":  [
                                                                                                                {
                                                                                                                    "additionalProperties":  true,
                                                                                                                    "type":  "object"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type":  "null"
                                                                                                                }
                                                                                                            ],
                                                                                                  "title":  "Metadata",
                                                                                                  "description":  "메타데이터 (stock_code, created_from_message_id 등)"
                                                                                              }
                                                                             },
                                                              "type":  "object",
                                                              "required":  [
                                                                               "title",
                                                                               "content",
                                                                               "artifact_type"
                                                                           ],
                                                              "title":  "ArtifactCreate",
                                                              "description":  "Artifact 생성 요청"
                                                          },
                                       "ArtifactListItem":  {
                                                                "properties":  {
                                                                                   "artifact_id":  {
                                                                                                       "type":  "string",
                                                                                                       "format":  "uuid",
                                                                                                       "title":  "Artifact Id"
                                                                                                   },
                                                                                   "title":  {
                                                                                                 "type":  "string",
                                                                                                 "title":  "Title"
                                                                                             },
                                                                                   "artifact_type":  {
                                                                                                         "type":  "string",
                                                                                                         "title":  "Artifact Type"
                                                                                                     },
                                                                                   "preview":  {
                                                                                                   "anyOf":  [
                                                                                                                 {
                                                                                                                     "type":  "string"
                                                                                                                 },
                                                                                                                 {
                                                                                                                     "type":  "null"
                                                                                                                 }
                                                                                                             ],
                                                                                                   "title":  "Preview"
                                                                                               },
                                                                                   "created_at":  {
                                                                                                      "type":  "string",
                                                                                                      "format":  "date-time",
                                                                                                      "title":  "Created At"
                                                                                                  }
                                                                               },
                                                                "type":  "object",
                                                                "required":  [
                                                                                 "artifact_id",
                                                                                 "title",
                                                                                 "artifact_type",
                                                                                 "preview",
                                                                                 "created_at"
                                                                             ],
                                                                "title":  "ArtifactListItem",
                                                                "description":  "Artifact 목록 아이템 (요약 정보)"
                                                            },
                                       "ArtifactListResponse":  {
                                                                    "properties":  {
                                                                                       "items":  {
                                                                                                     "items":  {
                                                                                                                   "$ref":  "#/components/schemas/ArtifactListItem"
                                                                                                               },
                                                                                                     "type":  "array",
                                                                                                     "title":  "Items"
                                                                                                 },
                                                                                       "total":  {
                                                                                                     "type":  "integer",
                                                                                                     "title":  "Total"
                                                                                                 },
                                                                                       "limit":  {
                                                                                                     "type":  "integer",
                                                                                                     "title":  "Limit"
                                                                                                 },
                                                                                       "offset":  {
                                                                                                      "type":  "integer",
                                                                                                      "title":  "Offset"
                                                                                                  }
                                                                                   },
                                                                    "type":  "object",
                                                                    "required":  [
                                                                                     "items",
                                                                                     "total",
                                                                                     "limit",
                                                                                     "offset"
                                                                                 ],
                                                                    "title":  "ArtifactListResponse",
                                                                    "description":  "Artifact 목록 응답"
                                                                },
                                       "ArtifactResponse":  {
                                                                "properties":  {
                                                                                   "artifact_id":  {
                                                                                                       "type":  "string",
                                                                                                       "format":  "uuid",
                                                                                                       "title":  "Artifact Id"
                                                                                                   },
                                                                                   "user_id":  {
                                                                                                   "type":  "string",
                                                                                                   "format":  "uuid",
                                                                                                   "title":  "User Id"
                                                                                               },
                                                                                   "title":  {
                                                                                                 "type":  "string",
                                                                                                 "title":  "Title"
                                                                                             },
                                                                                   "content":  {
                                                                                                   "type":  "string",
                                                                                                   "title":  "Content"
                                                                                               },
                                                                                   "artifact_type":  {
                                                                                                         "type":  "string",
                                                                                                         "title":  "Artifact Type"
                                                                                                     },
                                                                                   "metadata":  {
                                                                                                    "additionalProperties":  true,
                                                                                                    "type":  "object",
                                                                                                    "title":  "Metadata"
                                                                                                },
                                                                                   "preview":  {
                                                                                                   "anyOf":  [
                                                                                                                 {
                                                                                                                     "type":  "string"
                                                                                                                 },
                                                                                                                 {
                                                                                                                     "type":  "null"
                                                                                                                 }
                                                                                                             ],
                                                                                                   "title":  "Preview"
                                                                                               },
                                                                                   "created_at":  {
                                                                                                      "type":  "string",
                                                                                                      "format":  "date-time",
                                                                                                      "title":  "Created At"
                                                                                                  },
                                                                                   "updated_at":  {
                                                                                                      "type":  "string",
                                                                                                      "format":  "date-time",
                                                                                                      "title":  "Updated At"
                                                                                                  }
                                                                               },
                                                                "type":  "object",
                                                                "required":  [
                                                                                 "artifact_id",
                                                                                 "user_id",
                                                                                 "title",
                                                                                 "content",
                                                                                 "artifact_type",
                                                                                 "metadata",
                                                                                 "preview",
                                                                                 "created_at",
                                                                                 "updated_at"
                                                                             ],
                                                                "title":  "ArtifactResponse",
                                                                "description":  "Artifact 응답"
                                                            },
                                       "ArtifactUpdate":  {
                                                              "properties":  {
                                                                                 "title":  {
                                                                                               "anyOf":  [
                                                                                                             {
                                                                                                                 "type":  "string",
                                                                                                                 "maxLength":  500,
                                                                                                                 "minLength":  1
                                                                                                             },
                                                                                                             {
                                                                                                                 "type":  "null"
                                                                                                             }
                                                                                                         ],
                                                                                               "title":  "Title"
                                                                                           },
                                                                                 "content":  {
                                                                                                 "anyOf":  [
                                                                                                               {
                                                                                                                   "type":  "string",
                                                                                                                   "minLength":  1
                                                                                                               },
                                                                                                               {
                                                                                                                   "type":  "null"
                                                                                                               }
                                                                                                           ],
                                                                                                 "title":  "Content"
                                                                                             },
                                                                                 "metadata":  {
                                                                                                  "anyOf":  [
                                                                                                                {
                                                                                                                    "additionalProperties":  true,
                                                                                                                    "type":  "object"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type":  "null"
                                                                                                                }
                                                                                                            ],
                                                                                                  "title":  "Metadata"
                                                                                              }
                                                                             },
                                                              "type":  "object",
                                                              "title":  "ArtifactUpdate",
                                                              "description":  "Artifact 수정 요청"
                                                          },
                                       "AutomationLevelResponse":  {
                                                                       "properties":  {
                                                                                          "level":  {
                                                                                                        "type":  "integer",
                                                                                                        "maximum":  3.0,
                                                                                                        "minimum":  1.0,
                                                                                                        "title":  "Level",
                                                                                                        "description":  "자동화 레벨 (1=Pilot, 2=Copilot, 3=Advisor)"
                                                                                                    },
                                                                                          "level_name":  {
                                                                                                             "type":  "string",
                                                                                                             "title":  "Level Name",
                                                                                                             "description":  "레벨 명칭"
                                                                                                         },
                                                                                          "description":  {
                                                                                                              "type":  "string",
                                                                                                              "title":  "Description",
                                                                                                              "description":  "레벨 설명"
                                                                                                          },
                                                                                          "interrupt_points":  {
                                                                                                                   "items":  {
                                                                                                                                 "type":  "string"
                                                                                                                             },
                                                                                                                   "type":  "array",
                                                                                                                   "title":  "Interrupt Points",
                                                                                                                   "description":  "HITL 개입 지점"
                                                                                                               }
                                                                                      },
                                                                       "type":  "object",
                                                                       "required":  [
                                                                                        "level",
                                                                                        "level_name",
                                                                                        "description",
                                                                                        "interrupt_points"
                                                                                    ],
                                                                       "title":  "AutomationLevelResponse",
                                                                       "description":  "자동화 레벨 조회 응답"
                                                                   },
                                       "AutomationLevelUpdateRequest":  {
                                                                            "properties":  {
                                                                                               "level":  {
                                                                                                             "type":  "integer",
                                                                                                             "maximum":  3.0,
                                                                                                             "minimum":  1.0,
                                                                                                             "title":  "Level",
                                                                                                             "description":  "변경할 자동화 레벨"
                                                                                                         },
                                                                                               "confirm":  {
                                                                                                               "type":  "boolean",
                                                                                                               "title":  "Confirm",
                                                                                                               "description":  "변경 확인",
                                                                                                               "default":  false
                                                                                                           }
                                                                                           },
                                                                            "type":  "object",
                                                                            "required":  [
                                                                                             "level"
                                                                                         ],
                                                                            "title":  "AutomationLevelUpdateRequest",
                                                                            "description":  "자동화 레벨 변경 요청"
                                                                        },
                                       "AutomationLevelUpdateResponse":  {
                                                                             "properties":  {
                                                                                                "level":  {
                                                                                                              "type":  "integer",
                                                                                                              "title":  "Level"
                                                                                                          },
                                                                                                "message":  {
                                                                                                                "type":  "string",
                                                                                                                "title":  "Message"
                                                                                                            }
                                                                                            },
                                                                             "type":  "object",
                                                                             "required":  [
                                                                                              "level",
                                                                                              "message"
                                                                                          ],
                                                                             "title":  "AutomationLevelUpdateResponse",
                                                                             "description":  "자동화 레벨 변경 응답"
                                                                         },
                                       "AutomationSettings":  {
                                                                  "properties":  {
                                                                                     "level":  {
                                                                                                   "type":  "integer",
                                                                                                   "title":  "Level"
                                                                                               },
                                                                                     "level_name":  {
                                                                                                        "type":  "string",
                                                                                                        "title":  "Level Name"
                                                                                                    },
                                                                                     "enabled":  {
                                                                                                     "type":  "boolean",
                                                                                                     "title":  "Enabled"
                                                                                                 }
                                                                                 },
                                                                  "type":  "object",
                                                                  "required":  [
                                                                                   "level",
                                                                                   "level_name",
                                                                                   "enabled"
                                                                               ],
                                                                  "title":  "AutomationSettings",
                                                                  "description":  "자동화 설정 정보"
                                                              },
                                       "ChatRequest":  {
                                                           "properties":  {
                                                                              "message":  {
                                                                                              "type":  "string",
                                                                                              "title":  "Message"
                                                                                          },
                                                                              "conversation_id":  {
                                                                                                      "anyOf":  [
                                                                                                                    {
                                                                                                                        "type":  "string"
                                                                                                                    },
                                                                                                                    {
                                                                                                                        "type":  "null"
                                                                                                                    }
                                                                                                                ],
                                                                                                      "title":  "Conversation Id"
                                                                                                  },
                                                                              "automation_level":  {
                                                                                                       "type":  "integer",
                                                                                                       "maximum":  3.0,
                                                                                                       "minimum":  1.0,
                                                                                                       "title":  "Automation Level",
                                                                                                       "description":  "자동화 레벨: 1=Pilot, 2=Copilot, 3=Advisor",
                                                                                                       "default":  2
                                                                                                   }
                                                                          },
                                                           "type":  "object",
                                                           "required":  [
                                                                            "message"
                                                                        ],
                                                           "title":  "ChatRequest",
                                                           "description":  "채팅 요청 스키마"
                                                       },
                                       "ChatResponse":  {
                                                            "properties":  {
                                                                               "message":  {
                                                                                               "type":  "string",
                                                                                               "title":  "Message"
                                                                                           },
                                                                               "conversation_id":  {
                                                                                                       "type":  "string",
                                                                                                       "title":  "Conversation Id"
                                                                                                   },
                                                                               "requires_approval":  {
                                                                                                         "type":  "boolean",
                                                                                                         "title":  "Requires Approval",
                                                                                                         "default":  false
                                                                                                     },
                                                                               "approval_request":  {
                                                                                                        "anyOf":  [
                                                                                                                      {
                                                                                                                          "additionalProperties":  true,
                                                                                                                          "type":  "object"
                                                                                                                      },
                                                                                                                      {
                                                                                                                          "type":  "null"
                                                                                                                      }
                                                                                                                  ],
                                                                                                        "title":  "Approval Request"
                                                                                                    },
                                                                               "metadata":  {
                                                                                                "anyOf":  [
                                                                                                              {
                                                                                                                  "additionalProperties":  true,
                                                                                                                  "type":  "object"
                                                                                                              },
                                                                                                              {
                                                                                                                  "type":  "null"
                                                                                                              }
                                                                                                          ],
                                                                                                "title":  "Metadata"
                                                                                            }
                                                                           },
                                                            "type":  "object",
                                                            "required":  [
                                                                             "message",
                                                                             "conversation_id"
                                                                         ],
                                                            "title":  "ChatResponse",
                                                            "description":  "채팅 응답 스키마"
                                                        },
                                       "ChatSessionSummary":  {
                                                                  "properties":  {
                                                                                     "conversation_id":  {
                                                                                                             "type":  "string",
                                                                                                             "title":  "Conversation Id"
                                                                                                         },
                                                                                     "title":  {
                                                                                                   "type":  "string",
                                                                                                   "title":  "Title"
                                                                                               },
                                                                                     "last_message":  {
                                                                                                          "anyOf":  [
                                                                                                                        {
                                                                                                                            "type":  "string"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type":  "null"
                                                                                                                        }
                                                                                                                    ],
                                                                                                          "title":  "Last Message"
                                                                                                      },
                                                                                     "last_message_at":  {
                                                                                                             "anyOf":  [
                                                                                                                           {
                                                                                                                               "type":  "string"
                                                                                                                           },
                                                                                                                           {
                                                                                                                               "type":  "null"
                                                                                                                           }
                                                                                                                       ],
                                                                                                             "title":  "Last Message At"
                                                                                                         },
                                                                                     "automation_level":  {
                                                                                                              "type":  "integer",
                                                                                                              "title":  "Automation Level"
                                                                                                          },
                                                                                     "message_count":  {
                                                                                                           "type":  "integer",
                                                                                                           "title":  "Message Count"
                                                                                                       },
                                                                                     "created_at":  {
                                                                                                        "anyOf":  [
                                                                                                                      {
                                                                                                                          "type":  "string"
                                                                                                                      },
                                                                                                                      {
                                                                                                                          "type":  "null"
                                                                                                                      }
                                                                                                                  ],
                                                                                                        "title":  "Created At"
                                                                                                    }
                                                                                 },
                                                                  "type":  "object",
                                                                  "required":  [
                                                                                   "conversation_id",
                                                                                   "title",
                                                                                   "automation_level",
                                                                                   "message_count"
                                                                               ],
                                                                  "title":  "ChatSessionSummary",
                                                                  "description":  "채팅 세션 요약 스키마"
                                                              },
                                       "DashboardPayload":  {
                                                                "properties":  {
                                                                                   "total_assets":  {
                                                                                                        "$ref":  "#/components/schemas/TotalAssets"
                                                                                                    },
                                                                                   "account_connection":  {
                                                                                                              "$ref":  "#/components/schemas/AccountConnection"
                                                                                                          },
                                                                                   "automation_settings":  {
                                                                                                               "$ref":  "#/components/schemas/AutomationSettings"
                                                                                                           },
                                                                                   "recent_activities":  {
                                                                                                             "items":  {
                                                                                                                           "$ref":  "#/components/schemas/ActivityItem"
                                                                                                                       },
                                                                                                             "type":  "array",
                                                                                                             "title":  "Recent Activities"
                                                                                                         },
                                                                                   "top_holdings":  {
                                                                                                        "items":  {
                                                                                                                      "$ref":  "#/components/schemas/HoldingHighlight"
                                                                                                                  },
                                                                                                        "type":  "array",
                                                                                                        "title":  "Top Holdings"
                                                                                                    },
                                                                                   "performance_summary":  {
                                                                                                               "$ref":  "#/components/schemas/PerformanceSummary"
                                                                                                           }
                                                                               },
                                                                "type":  "object",
                                                                "required":  [
                                                                                 "total_assets",
                                                                                 "account_connection",
                                                                                 "automation_settings",
                                                                                 "recent_activities",
                                                                                 "top_holdings",
                                                                                 "performance_summary"
                                                                             ],
                                                                "title":  "DashboardPayload",
                                                                "description":  "대시보드 API 응답 페이로드"
                                                            },
                                       "HTTPValidationError":  {
                                                                   "properties":  {
                                                                                      "detail":  {
                                                                                                     "items":  {
                                                                                                                   "$ref":  "#/components/schemas/ValidationError"
                                                                                                               },
                                                                                                     "type":  "array",
                                                                                                     "title":  "Detail"
                                                                                                 }
                                                                                  },
                                                                   "type":  "object",
                                                                   "title":  "HTTPValidationError"
                                                               },
                                       "HoldingHighlight":  {
                                                                "properties":  {
                                                                                   "stock_code":  {
                                                                                                      "type":  "string",
                                                                                                      "title":  "Stock Code"
                                                                                                  },
                                                                                   "stock_name":  {
                                                                                                      "type":  "string",
                                                                                                      "title":  "Stock Name"
                                                                                                  },
                                                                                   "quantity":  {
                                                                                                    "type":  "integer",
                                                                                                    "title":  "Quantity"
                                                                                                },
                                                                                   "value":  {
                                                                                                 "type":  "number",
                                                                                                 "title":  "Value"
                                                                                             },
                                                                                   "profit_rate":  {
                                                                                                       "type":  "number",
                                                                                                       "title":  "Profit Rate"
                                                                                                   },
                                                                                   "weight":  {
                                                                                                  "type":  "number",
                                                                                                  "title":  "Weight"
                                                                                              }
                                                                               },
                                                                "type":  "object",
                                                                "required":  [
                                                                                 "stock_code",
                                                                                 "stock_name",
                                                                                 "quantity",
                                                                                 "value",
                                                                                 "profit_rate",
                                                                                 "weight"
                                                                             ],
                                                                "title":  "HoldingHighlight",
                                                                "description":  "상위 보유 종목 요약"
                                                            },
                                       "MultiAgentStreamRequest":  {
                                                                       "properties":  {
                                                                                          "message":  {
                                                                                                          "type":  "string",
                                                                                                          "title":  "Message"
                                                                                                      },
                                                                                          "user_id":  {
                                                                                                          "anyOf":  [
                                                                                                                        {
                                                                                                                            "type":  "string"
                                                                                                                        },
                                                                                                                        {
                                                                                                                            "type":  "null"
                                                                                                                        }
                                                                                                                    ],
                                                                                                          "title":  "User Id"
                                                                                                      },
                                                                                          "conversation_id":  {
                                                                                                                  "anyOf":  [
                                                                                                                                {
                                                                                                                                    "type":  "string"
                                                                                                                                },
                                                                                                                                {
                                                                                                                                    "type":  "null"
                                                                                                                                }
                                                                                                                            ],
                                                                                                                  "title":  "Conversation Id"
                                                                                                              },
                                                                                          "automation_level":  {
                                                                                                                   "type":  "integer",
                                                                                                                   "maximum":  3.0,
                                                                                                                   "minimum":  1.0,
                                                                                                                   "title":  "Automation Level",
                                                                                                                   "default":  2
                                                                                                               }
                                                                                      },
                                                                       "type":  "object",
                                                                       "required":  [
                                                                                        "message"
                                                                                    ],
                                                                       "title":  "MultiAgentStreamRequest",
                                                                       "description":  "멀티 에이전트 스트리밍 요청"
                                                                   },
                                       "PerformancePeriod":  {
                                                                 "properties":  {
                                                                                    "profit":  {
                                                                                                   "type":  "number",
                                                                                                   "title":  "Profit"
                                                                                               },
                                                                                    "profit_rate":  {
                                                                                                        "type":  "number",
                                                                                                        "title":  "Profit Rate"
                                                                                                    }
                                                                                },
                                                                 "type":  "object",
                                                                 "required":  [
                                                                                  "profit",
                                                                                  "profit_rate"
                                                                              ],
                                                                 "title":  "PerformancePeriod",
                                                                 "description":  "기간별 성과 지표"
                                                             },
                                       "PerformanceSummary":  {
                                                                  "properties":  {
                                                                                     "today":  {
                                                                                                   "$ref":  "#/components/schemas/PerformancePeriod"
                                                                                               },
                                                                                     "week":  {
                                                                                                  "$ref":  "#/components/schemas/PerformancePeriod"
                                                                                              },
                                                                                     "month":  {
                                                                                                   "$ref":  "#/components/schemas/PerformancePeriod"
                                                                                               },
                                                                                     "year":  {
                                                                                                  "$ref":  "#/components/schemas/PerformancePeriod"
                                                                                              }
                                                                                 },
                                                                  "type":  "object",
                                                                  "required":  [
                                                                                   "today",
                                                                                   "week",
                                                                                   "month",
                                                                                   "year"
                                                                               ],
                                                                  "title":  "PerformanceSummary",
                                                                  "description":  "기간별 성과 요약"
                                                              },
                                       "PortfolioAllocation":  {
                                                                   "properties":  {
                                                                                      "sectors":  {
                                                                                                      "items":  {
                                                                                                                    "$ref":  "#/components/schemas/AllocationItem"
                                                                                                                },
                                                                                                      "type":  "array",
                                                                                                      "title":  "Sectors"
                                                                                                  },
                                                                                      "asset_classes":  {
                                                                                                            "items":  {
                                                                                                                          "$ref":  "#/components/schemas/AllocationItem"
                                                                                                                      },
                                                                                                            "type":  "array",
                                                                                                            "title":  "Asset Classes"
                                                                                                        }
                                                                                  },
                                                                   "type":  "object",
                                                                   "required":  [
                                                                                    "sectors",
                                                                                    "asset_classes"
                                                                                ],
                                                                   "title":  "PortfolioAllocation",
                                                                   "description":  "자산 및 섹터 배분 정보"
                                                               },
                                       "PortfolioChartData":  {
                                                                  "properties":  {
                                                                                     "stocks":  {
                                                                                                    "items":  {
                                                                                                                  "$ref":  "#/components/schemas/StockChartData"
                                                                                                              },
                                                                                                    "type":  "array",
                                                                                                    "title":  "Stocks",
                                                                                                    "description":  "보유 종목 목록"
                                                                                                },
                                                                                     "total_value":  {
                                                                                                         "type":  "number",
                                                                                                         "minimum":  0.0,
                                                                                                         "title":  "Total Value",
                                                                                                         "description":  "총 평가금액 (원)"
                                                                                                     },
                                                                                     "total_return":  {
                                                                                                          "type":  "number",
                                                                                                          "title":  "Total Return",
                                                                                                          "description":  "총 수익금 (원)"
                                                                                                      },
                                                                                     "total_return_percent":  {
                                                                                                                  "type":  "number",
                                                                                                                  "title":  "Total Return Percent",
                                                                                                                  "description":  "총 수익률 (%)"
                                                                                                              },
                                                                                     "cash":  {
                                                                                                  "type":  "number",
                                                                                                  "minimum":  0.0,
                                                                                                  "title":  "Cash",
                                                                                                  "description":  "현금 보유액 (원)"
                                                                                              },
                                                                                     "sectors":  {
                                                                                                     "additionalProperties":  {
                                                                                                                                  "type":  "number"
                                                                                                                              },
                                                                                                     "type":  "object",
                                                                                                     "title":  "Sectors",
                                                                                                     "description":  "섹터별 비중 (0~1)"
                                                                                                 }
                                                                                 },
                                                                  "type":  "object",
                                                                  "required":  [
                                                                                   "stocks",
                                                                                   "total_value",
                                                                                   "total_return",
                                                                                   "total_return_percent",
                                                                                   "cash",
                                                                                   "sectors"
                                                                               ],
                                                                  "title":  "PortfolioChartData",
                                                                  "description":  "포트폴리오 차트 데이터\n\nFrontend Recharts 연동용 데이터 구조"
                                                              },
                                       "PortfolioHoldingItem":  {
                                                                    "properties":  {
                                                                                       "stock_code":  {
                                                                                                          "type":  "string",
                                                                                                          "title":  "Stock Code"
                                                                                                      },
                                                                                       "stock_name":  {
                                                                                                          "type":  "string",
                                                                                                          "title":  "Stock Name"
                                                                                                      },
                                                                                       "quantity":  {
                                                                                                        "type":  "integer",
                                                                                                        "title":  "Quantity"
                                                                                                    },
                                                                                       "avg_price":  {
                                                                                                         "type":  "number",
                                                                                                         "title":  "Avg Price"
                                                                                                     },
                                                                                       "current_price":  {
                                                                                                             "type":  "number",
                                                                                                             "title":  "Current Price"
                                                                                                         },
                                                                                       "market_value":  {
                                                                                                            "type":  "number",
                                                                                                            "title":  "Market Value"
                                                                                                        },
                                                                                       "profit":  {
                                                                                                      "type":  "number",
                                                                                                      "title":  "Profit"
                                                                                                  },
                                                                                       "profit_rate":  {
                                                                                                           "type":  "number",
                                                                                                           "title":  "Profit Rate"
                                                                                                       },
                                                                                       "weight":  {
                                                                                                      "type":  "number",
                                                                                                      "title":  "Weight"
                                                                                                  }
                                                                                   },
                                                                    "type":  "object",
                                                                    "required":  [
                                                                                     "stock_code",
                                                                                     "stock_name",
                                                                                     "quantity",
                                                                                     "avg_price",
                                                                                     "current_price",
                                                                                     "market_value",
                                                                                     "profit",
                                                                                     "profit_rate",
                                                                                     "weight"
                                                                                 ],
                                                                    "title":  "PortfolioHoldingItem",
                                                                    "description":  "보유 종목 세부 정보"
                                                                },
                                       "PortfolioOverview":  {
                                                                 "properties":  {
                                                                                    "summary":  {
                                                                                                    "$ref":  "#/components/schemas/PortfolioSummarySection"
                                                                                                },
                                                                                    "holdings":  {
                                                                                                     "items":  {
                                                                                                                   "$ref":  "#/components/schemas/PortfolioHoldingItem"
                                                                                                               },
                                                                                                     "type":  "array",
                                                                                                     "title":  "Holdings"
                                                                                                 },
                                                                                    "allocation":  {
                                                                                                       "$ref":  "#/components/schemas/PortfolioAllocation"
                                                                                                   }
                                                                                },
                                                                 "type":  "object",
                                                                 "required":  [
                                                                                  "summary",
                                                                                  "holdings",
                                                                                  "allocation"
                                                                              ],
                                                                 "title":  "PortfolioOverview",
                                                                 "description":  "포트폴리오 오버뷰 응답 페이로드"
                                                             },
                                       "PortfolioSummary":  {
                                                                "properties":  {
                                                                                   "portfolio_id":  {
                                                                                                        "type":  "string",
                                                                                                        "title":  "Portfolio Id"
                                                                                                    },
                                                                                   "total_value":  {
                                                                                                       "type":  "string",
                                                                                                       "title":  "Total Value"
                                                                                                   },
                                                                                   "cash_balance":  {
                                                                                                        "type":  "string",
                                                                                                        "title":  "Cash Balance"
                                                                                                    },
                                                                                   "invested_amount":  {
                                                                                                           "type":  "string",
                                                                                                           "title":  "Invested Amount"
                                                                                                       },
                                                                                   "total_return":  {
                                                                                                        "type":  "string",
                                                                                                        "title":  "Total Return"
                                                                                                    },
                                                                                   "positions":  {
                                                                                                     "items":  {
                                                                                                                   "$ref":  "#/components/schemas/Position"
                                                                                                               },
                                                                                                     "type":  "array",
                                                                                                     "title":  "Positions"
                                                                                                 },
                                                                                   "risk_profile":  {
                                                                                                        "anyOf":  [
                                                                                                                      {
                                                                                                                          "type":  "string"
                                                                                                                      },
                                                                                                                      {
                                                                                                                          "type":  "null"
                                                                                                                      }
                                                                                                                  ],
                                                                                                        "title":  "Risk Profile"
                                                                                                    },
                                                                                   "last_updated":  {
                                                                                                        "anyOf":  [
                                                                                                                      {
                                                                                                                          "type":  "string"
                                                                                                                      },
                                                                                                                      {
                                                                                                                          "type":  "null"
                                                                                                                      }
                                                                                                                  ],
                                                                                                        "title":  "Last Updated"
                                                                                                    }
                                                                               },
                                                                "type":  "object",
                                                                "required":  [
                                                                                 "portfolio_id",
                                                                                 "total_value",
                                                                                 "cash_balance",
                                                                                 "invested_amount",
                                                                                 "total_return",
                                                                                 "positions"
                                                                             ],
                                                                "title":  "PortfolioSummary",
                                                                "description":  "포트폴리오 요약"
                                                            },
                                       "PortfolioSummarySection":  {
                                                                       "properties":  {
                                                                                          "total_value":  {
                                                                                                              "type":  "number",
                                                                                                              "title":  "Total Value"
                                                                                                          },
                                                                                          "principal":  {
                                                                                                            "type":  "number",
                                                                                                            "title":  "Principal"
                                                                                                        },
                                                                                          "profit":  {
                                                                                                         "type":  "number",
                                                                                                         "title":  "Profit"
                                                                                                     },
                                                                                          "profit_rate":  {
                                                                                                              "type":  "number",
                                                                                                              "title":  "Profit Rate"
                                                                                                          },
                                                                                          "cash":  {
                                                                                                       "type":  "number",
                                                                                                       "title":  "Cash"
                                                                                                   },
                                                                                          "cash_percentage":  {
                                                                                                                  "type":  "number",
                                                                                                                  "title":  "Cash Percentage"
                                                                                                              },
                                                                                          "updated_at":  {
                                                                                                             "anyOf":  [
                                                                                                                           {
                                                                                                                               "type":  "string"
                                                                                                                           },
                                                                                                                           {
                                                                                                                               "type":  "null"
                                                                                                                           }
                                                                                                                       ],
                                                                                                             "title":  "Updated At"
                                                                                                         }
                                                                                      },
                                                                       "type":  "object",
                                                                       "required":  [
                                                                                        "total_value",
                                                                                        "principal",
                                                                                        "profit",
                                                                                        "profit_rate",
                                                                                        "cash",
                                                                                        "cash_percentage"
                                                                                    ],
                                                                       "title":  "PortfolioSummarySection",
                                                                       "description":  "포트폴리오 전체 요약 정보"
                                                                   },
                                       "Position":  {
                                                        "properties":  {
                                                                           "stock_code":  {
                                                                                              "type":  "string",
                                                                                              "title":  "Stock Code"
                                                                                          },
                                                                           "stock_name":  {
                                                                                              "type":  "string",
                                                                                              "title":  "Stock Name"
                                                                                          },
                                                                           "quantity":  {
                                                                                            "anyOf":  [
                                                                                                          {
                                                                                                              "type":  "integer"
                                                                                                          },
                                                                                                          {
                                                                                                              "type":  "null"
                                                                                                          }
                                                                                                      ],
                                                                                            "title":  "Quantity"
                                                                                        },
                                                                           "average_price":  {
                                                                                                 "anyOf":  [
                                                                                                               {
                                                                                                                   "type":  "string"
                                                                                                               },
                                                                                                               {
                                                                                                                   "type":  "null"
                                                                                                               }
                                                                                                           ],
                                                                                                 "title":  "Average Price"
                                                                                             },
                                                                           "current_price":  {
                                                                                                 "anyOf":  [
                                                                                                               {
                                                                                                                   "type":  "string"
                                                                                                               },
                                                                                                               {
                                                                                                                   "type":  "null"
                                                                                                               }
                                                                                                           ],
                                                                                                 "title":  "Current Price"
                                                                                             },
                                                                           "market_value":  {
                                                                                                "anyOf":  [
                                                                                                              {
                                                                                                                  "type":  "string"
                                                                                                              },
                                                                                                              {
                                                                                                                  "type":  "null"
                                                                                                              }
                                                                                                          ],
                                                                                                "title":  "Market Value"
                                                                                            },
                                                                           "unrealized_pnl":  {
                                                                                                  "anyOf":  [
                                                                                                                {
                                                                                                                    "type":  "string"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type":  "null"
                                                                                                                }
                                                                                                            ],
                                                                                                  "title":  "Unrealized Pnl"
                                                                                              },
                                                                           "unrealized_pnl_rate":  {
                                                                                                       "anyOf":  [
                                                                                                                     {
                                                                                                                         "type":  "string"
                                                                                                                     },
                                                                                                                     {
                                                                                                                         "type":  "null"
                                                                                                                     }
                                                                                                                 ],
                                                                                                       "title":  "Unrealized Pnl Rate"
                                                                                                   },
                                                                           "weight":  {
                                                                                          "anyOf":  [
                                                                                                        {
                                                                                                            "type":  "string"
                                                                                                        },
                                                                                                        {
                                                                                                            "type":  "null"
                                                                                                        }
                                                                                                    ],
                                                                                          "title":  "Weight"
                                                                                      },
                                                                           "sector":  {
                                                                                          "anyOf":  [
                                                                                                        {
                                                                                                            "type":  "string"
                                                                                                        },
                                                                                                        {
                                                                                                            "type":  "null"
                                                                                                        }
                                                                                                    ],
                                                                                          "title":  "Sector"
                                                                                      }
                                                                       },
                                                        "type":  "object",
                                                        "required":  [
                                                                         "stock_code",
                                                                         "stock_name"
                                                                     ],
                                                        "title":  "Position",
                                                        "description":  "포트폴리오 보유 종목"
                                                    },
                                       "StockChartData":  {
                                                              "properties":  {
                                                                                 "stock_code":  {
                                                                                                    "type":  "string",
                                                                                                    "title":  "Stock Code",
                                                                                                    "description":  "종목 코드"
                                                                                                },
                                                                                 "stock_name":  {
                                                                                                    "type":  "string",
                                                                                                    "title":  "Stock Name",
                                                                                                    "description":  "종목명"
                                                                                                },
                                                                                 "quantity":  {
                                                                                                  "type":  "integer",
                                                                                                  "minimum":  0.0,
                                                                                                  "title":  "Quantity",
                                                                                                  "description":  "보유 수량"
                                                                                              },
                                                                                 "current_price":  {
                                                                                                       "type":  "number",
                                                                                                       "minimum":  0.0,
                                                                                                       "title":  "Current Price",
                                                                                                       "description":  "현재가 (원)"
                                                                                                   },
                                                                                 "purchase_price":  {
                                                                                                        "type":  "number",
                                                                                                        "minimum":  0.0,
                                                                                                        "title":  "Purchase Price",
                                                                                                        "description":  "매수가 (원)"
                                                                                                    },
                                                                                 "weight":  {
                                                                                                "type":  "number",
                                                                                                "maximum":  1.0,
                                                                                                "minimum":  0.0,
                                                                                                "title":  "Weight",
                                                                                                "description":  "비중 (0~1)"
                                                                                            },
                                                                                 "return_percent":  {
                                                                                                        "type":  "number",
                                                                                                        "title":  "Return Percent",
                                                                                                        "description":  "수익률 (%)"
                                                                                                    },
                                                                                 "sector":  {
                                                                                                "type":  "string",
                                                                                                "title":  "Sector",
                                                                                                "description":  "섹터"
                                                                                            }
                                                                             },
                                                              "type":  "object",
                                                              "required":  [
                                                                               "stock_code",
                                                                               "stock_name",
                                                                               "quantity",
                                                                               "current_price",
                                                                               "purchase_price",
                                                                               "weight",
                                                                               "return_percent",
                                                                               "sector"
                                                                           ],
                                                              "title":  "StockChartData",
                                                              "description":  "차트용 종목 데이터"
                                                          },
                                       "StockInfo":  {
                                                         "properties":  {
                                                                            "stock_code":  {
                                                                                               "type":  "string",
                                                                                               "title":  "Stock Code"
                                                                                           },
                                                                            "stock_name":  {
                                                                                               "type":  "string",
                                                                                               "title":  "Stock Name"
                                                                                           },
                                                                            "market":  {
                                                                                           "type":  "string",
                                                                                           "title":  "Market"
                                                                                       },
                                                                            "sector":  {
                                                                                           "anyOf":  [
                                                                                                         {
                                                                                                             "type":  "string"
                                                                                                         },
                                                                                                         {
                                                                                                             "type":  "null"
                                                                                                         }
                                                                                                     ],
                                                                                           "title":  "Sector"
                                                                                       },
                                                                            "current_price":  {
                                                                                                  "anyOf":  [
                                                                                                                {
                                                                                                                    "type":  "string"
                                                                                                                },
                                                                                                                {
                                                                                                                    "type":  "null"
                                                                                                                }
                                                                                                            ],
                                                                                                  "title":  "Current Price"
                                                                                              },
                                                                            "change_rate":  {
                                                                                                "anyOf":  [
                                                                                                              {
                                                                                                                  "type":  "string"
                                                                                                              },
                                                                                                              {
                                                                                                                  "type":  "null"
                                                                                                              }
                                                                                                          ],
                                                                                                "title":  "Change Rate"
                                                                                            },
                                                                            "volume":  {
                                                                                           "anyOf":  [
                                                                                                         {
                                                                                                             "type":  "integer"
                                                                                                         },
                                                                                                         {
                                                                                                             "type":  "null"
                                                                                                         }
                                                                                                     ],
                                                                                           "title":  "Volume"
                                                                                       }
                                                                        },
                                                         "type":  "object",
                                                         "required":  [
                                                                          "stock_code",
                                                                          "stock_name",
                                                                          "market",
                                                                          "sector",
                                                                          "current_price",
                                                                          "change_rate",
                                                                          "volume"
                                                                      ],
                                                         "title":  "StockInfo",
                                                         "description":  "주식 기본 정보"
                                                     },
                                       "TotalAssets":  {
                                                           "properties":  {
                                                                              "value":  {
                                                                                            "type":  "number",
                                                                                            "title":  "Value"
                                                                                        },
                                                                              "profit":  {
                                                                                             "type":  "number",
                                                                                             "title":  "Profit"
                                                                                         },
                                                                              "profit_rate":  {
                                                                                                  "type":  "number",
                                                                                                  "title":  "Profit Rate"
                                                                                              },
                                                                              "change_24h":  {
                                                                                                 "type":  "number",
                                                                                                 "title":  "Change 24H"
                                                                                             },
                                                                              "change_24h_rate":  {
                                                                                                      "type":  "number",
                                                                                                      "title":  "Change 24H Rate"
                                                                                                  }
                                                                          },
                                                           "type":  "object",
                                                           "required":  [
                                                                            "value",
                                                                            "profit",
                                                                            "profit_rate",
                                                                            "change_24h",
                                                                            "change_24h_rate"
                                                                        ],
                                                           "title":  "TotalAssets",
                                                           "description":  "총자산 요약 정보"
                                                       },
                                       "ValidationError":  {
                                                               "properties":  {
                                                                                  "loc":  {
                                                                                              "items":  {
                                                                                                            "anyOf":  [
                                                                                                                          {
                                                                                                                              "type":  "string"
                                                                                                                          },
                                                                                                                          {
                                                                                                                              "type":  "integer"
                                                                                                                          }
                                                                                                                      ]
                                                                                                        },
                                                                                              "type":  "array",
                                                                                              "title":  "Location"
                                                                                          },
                                                                                  "msg":  {
                                                                                              "type":  "string",
                                                                                              "title":  "Message"
                                                                                          },
                                                                                  "type":  {
                                                                                               "type":  "string",
                                                                                               "title":  "Error Type"
                                                                                           }
                                                                              },
                                                               "type":  "object",
                                                               "required":  [
                                                                                "loc",
                                                                                "msg",
                                                                                "type"
                                                                            ],
                                                               "title":  "ValidationError"
                                                           }
                                   }
                   },
    "tags":  [
                 {
                     "name":  "chat",
                     "description":  "대화 생성, 히스토리 조회, 승인 처리를 담당하는 엔드포인트 모음입니다."
                 },
                 {
                     "name":  "dashboard",
                     "description":  "대시보드 화면에 필요한 자산 요약, 활동 로그 등을 제공합니다."
                 },
                 {
                     "name":  "portfolio",
                     "description":  "포트폴리오 요약과 리밸런싱 등 자산 관리 기능을 위한 엔드포인트입니다."
                 },
                 {
                     "name":  "stocks",
                     "description":  "종목 검색 및 시세 조회와 같은 주식 데이터 관련 API입니다."
                 },
                 {
                     "name":  "settings",
                     "description":  "사용자 설정 (자동화 레벨 등)을 관리하는 엔드포인트입니다."
                 },
                 {
                     "name":  "artifacts",
                     "description":  "AI 생성 콘텐츠 저장 및 관리 (분석 결과, 포트폴리오, 전략 등)를 위한 엔드포인트입니다."
                 },
                 {
                     "name":  "approvals",
                     "description":  "승인 이력 조회 및 관리 (매매, 리밸런싱 등 HITL 승인 기록)를 위한 엔드포인트입니다."
                 }
             ]
}
