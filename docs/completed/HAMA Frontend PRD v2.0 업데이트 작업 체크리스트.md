**목표:** 캡스톤 메이트와의 회의 내용을 100% 반영하여, 명확하고 실행 가능한 제품 요구사항 정의서(PRD)를 완성한다.

---

#### **Phase 1: 사전 준비 및 구조 설계 (가장 먼저 해야 할 일)**

- [x] **1. 정보 구조(IA) 다이어그램 설계**

- **도구:** FigJam 또는 선호하는 다이어그램 툴 사용
    
- **내용:**
    
    - 서비스의 전체 화면과 기능 관계를 시각적으로 도식화합니다.
        
    - `Flow` > `Page` > `View` > `Component` 등 위계질서를 명확히 정의합니다.
        
    - **결정:** 온보딩 플로우, 메인(챗) 플로우, 설정 플로우 등 최상위 플로우를 기준으로 구조를 잡습니다.
        
- **이유:** 이 작업이 선행되어야 PRD 전체의 용어와 구조를 일관성 있게 가져갈 수 있습니다.
    

- [x] **2. Figma 파일 체계화**

- **내용:**
    
    - 각 화면(Frame)의 이름을 IA 기준으로 명확하게 변경합니다. (예: `Chat`, `Portfolio-Main`)
        
    - IA의 `Flow`나 `Page` 단위로 섹션(Section)을 만들어 화면들을 그룹화합니다.
        
    - 불필요하거나 중복되는 컴포넌트를 정리하여 일관성을 확보합니다.
        

---

#### **Phase 2: PRD 문서 전면 개편**

- [x] **3. PRD의 목적 및 기본 구조 변경**

- **목표:** '상세 설계서'가 아닌, '요구사항 정의서'로 문서의 성격을 변경합니다.
    
- **실행:**
    
    - **(삭제/축소)** `13. Component Structure`, `20. State Management`, `23. Real-time Features` 등 개발 레벨의 상세 구현 내용은 대폭 축소하거나 외부 기술 문서로 분리한다는 내용을 명시합니다.
        
    - **(재작성)** 모든 설명을 '무엇을 만들어야 하는가'가 아닌 **'사용자가 무엇을 할 수 있어야 하고, 왜 그것이 필요한가'**의 관점에서 재작성합니다.
        

- [x] **4. 기능 우선순위 기반으로 문서 재구조화**

- **목표:** PRD의 전체 목차를 우선순위(Phase) 기준으로 재편성합니다.
    
- **실행:**
    
    - 현재의 기능 나열식 구조를 버리고, 아래와 같이 문서의 큰 챕터를 나눕니다.
        
        - **Phase 1: MVP 핵심 요구사항** (이것 없이는 서비스가 성립되지 않는 기능)
            
        - **Phase 2: 확장 요구사항** (핵심 기능을 강화하거나 다음 단계로 나아가는 기능)
            
        - **Phase 3: 고도화 및 부가 기능** (있으면 좋은 기능)
            
    - 기존 PRD의 모든 기능과 요구사항을 이 새로운 구조에 맞게 재배치합니다.
        

- [x] **5. 오류 처리(Error Handling) 섹션 재배치**

- **실행:** `19. Error Handling & Exception Specifications` 섹션을 통째로 두지 않습니다.
    
- 각 오류 처리 정책을 관련된 기능 요구사항의 **하위 항목(예외 처리)**으로 이동시킵니다.
    
    - 예: HITL 승인 API 실패 시나리오는 'HITL 기능 요구사항' 아래로 이동.
        

---

#### **Phase 3: 세부 요구사항 수정 (회의록 기반)**

_이제 새로운 구조 위에서 각 항목의 내용을 수정합니다._

- [x] **6. 핵심 설계 원칙 및 레이아웃 수정**

- `1. Executive Summary` 및 `3. Core Layout` 수정:
    
    - **Persistent Chat Input 원칙 변경:** "모든 페이지에서 고정" -> "**Chat, Artifact 상세, 포트폴리오 화면에서만 고정**"으로 수정합니다.
        

- [x] **7. Chat 및 에이전트 활동 뷰 요구사항 변경**

- `4. Chat Interface` 및 `6. LangGraph Agent Activity View` 수정:
    
    - **에이전트 활동 표시 방식 변경:** 별도의 토글 가능한 패널(`6. LangGraph...`) 방식 -> **Chat 화면 내에 Claude처럼 시간 순서대로 자연스럽게 표시**되는 방식으로 요구사항을 통합하고 수정합니다. (`Thinking 표시` 요구사항과 병합)
        

- [x] **8. HITL 인터페이스 요구사항 수정**

- `5. HITL Interface` 수정:
    
    - **(이미지 추가)** 회의록에서 논의된 것처럼, 현재 PRD에 관련된 **Figma 화면 이미지를 직접 첨부**하여 이해를 돕습니다.
        

- [x] **9. 포트폴리오 페이지 요구사항 변경**

- `8. Portfolio Page` 수정:
    
    - **우선순위 상향:** '포트폴리오 구성 시각화(차트 옵션)' 기능을 Phase 1(핵심 기능)으로 이동시킵니다.
        
    - **요구사항 구체화:** "AI가 구성한 포트폴리오를 원 그래프 등으로 시각화하여 사이드 패널(혹은 아티팩트)에서 보여준다"는 요구사항을 명확히 합니다.
        

- [x] **10. 마이페이지 및 온보딩 요구사항 변경**

- `9. My Page` 및 `10. Onboarding Flow` 수정:
    
    - **자동화 레벨 설정 UI 변경:** 단순 라디오 버튼 -> **전체 프로세스를 보여주는 프로그레스 바 형태에서 사용자가 개입 지점을 시각적으로 확인**할 수 있는 UI로 요구사항을 구체화합니다.
        
    - **온보딩 플로우 역할 명확화:** 필수 과정이 아닌, 마이페이지에서 **선택적으로 '체험'**하는 기능임을 명시하고 우선순위를 낮춥니다.
        

- [x] **11. 'Out of Scope' 항목 요구사항으로 편입**

- `18. Out of Scope (MVP)` 섹션 수정:
    
    - **다국어 지원 (영어/한국어):** 요구사항에 포함시키고 Phase 2로 배치합니다.
        
    - **다크 모드:** 요구사항에 포함시키고, "초기 설계부터 고려해야 함"을 명시하며 Phase 1 또는 2로 배치합니다.
        

- [x] **12. 신규 요구사항 추가**

- **투자 성향 구체화:**
    
    - `9. My Page` 또는 별도 섹션에 **'초개인화된 투자 성향 분석'** 요구사항을 새로 추가합니다.
        
    - 내용: 기존의 4단계 분류 외에, 사용자의 행동 데이터와 포트폴리오를 기반으로 LLM이 **상세한 서술형 프로필(예: "이 사용자는 하루 평균 n번 매매를 하고...")을 생성하고 관리**해야 한다는 요구사항을 정의합니다.
        

---

#### **Phase 4: 최종 검토 및 후속 조치**

- [x] **13. 최종 검토 및 이미지 첨부**

- 전체 PRD를 다시 읽으며 IA 기준으로 용어가 통일되었는지 확인합니다.

- 각 기능 설명마다 이해를 돕기 위한 **Figma 화면 이미지를 첨부**합니다.


- [x] **14. 백엔드 요구사항 도출 및 전달**

- **완성된 PRD v2.0을 기반으로**, 프론트엔드 구현을 위해 백엔드에서 추가되거나 변경되어야 할 API 및 기능(예: 상세 투자 성향 데이터 관련)을 목록으로 정리합니다.

- 정리된 목록을 **백엔드 개발을 담당중인 캡스톤 메이트에게 전달하여 백엔드 개발을 요청**합니다.
    

---

이 내용을 보시고 작업을 진행하시면 됩니다.