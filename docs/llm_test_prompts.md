# LLM 테스트 프롬프트 가이드

목적: 프론트에서 백엔드 `/api/v1/chat/`에 던졌을 때 “보기 좋은” 답변을 유도하는 예시 프롬프트 모음입니다. 카테고리(General/Research/Strategy/Risk/Portfolio/Trading/HITL)별로 구성했습니다. 테스트 모드와 실모드 모두에서 활용할 수 있으며, Trading 관련 프롬프트는 승인(HITL)을 유발하도록 설계되어 있습니다.

## 사용 전 간단 팁
- 맥락과 출력 형식을 함께 요구하세요: 기간, 종목/시장, 지표, 요약 형식 지정.
- 수치·조건을 구체화하세요: 예) “최근 12개월”, “PER·ROE 중심”, “3줄 요약 + 5개 불릿”.
- 리스크/대안까지 요청하세요: 장점/단점, 불확실성, 대안 시나리오.

권장 형식 지시어(원하는 프롬프트 뒤에 붙여 사용):
```
출력 형식:
- 한 문단 요약(3–4문장)
- 핵심 지표 3–5개 불릿
- 리스크/가정 2–3개 불릿
```

---

## General (용어/배경지식/상황 질문)
1) PER가 뭐고, 언제 유용한 지표인지 예시와 함께 간단히 설명해줘.
2) 고배당주 투자 전략의 장단점을 개인 투자자 관점에서 5줄 내로 요약해줘.
3) 금리 인상 국면에서 성장주와 가치주의 상대 성과를 역사적 관점에서 간단 비교해줘.
4) S&P 500과 KOSPI의 상관관계를 장기·단기 관점으로 나눠 간단히 설명해줘.
5) ETF와 ETN 차이를 수수료·리스크·세제 관점에서 핵심만 정리해줘.
6) 포트폴리오 분산 투자에서 ‘상관계수’가 중요한 이유를 사례 중심으로 설명해줘.

---

## Research (종목 분석/평가)
빠른 분석(브리프)
1) 삼성전자 최근 12개월 주가와 기본 밸류에이션(PER, PBR)만 간단히 요약해줘. 결론은 BUY/HOLD/SELL 중 하나로.
2) 카카오의 최근 분기 실적 포인트 3가지만 뽑아 간단 의견을 줘.

상세 분석(디테일)
3) NAVER에 대해 최근 3년 재무(매출, 영업이익, 영업이익률, ROE), 밸류에이션(PER, PSR), 동종 업계 비교 1종목과 함께 평가해줘.
4) LG에너지솔루션의 성장 동력과 주요 리스크(원자재, 경쟁) 관점에서 균형 잡힌 분석을 제공해줘.
5) DB하이텍의 마진 사이클 관점에서 향후 12개월 내 기대/우려 요인을 각각 3개씩 나열해줘.

심층 분석(컴프리헨시브)
6) 네이버와 카카오의 광고/커머스 구조를 비교하고, 밸류에이션 갭 축소 가능성을 시나리오(베어·베이스·불)로 요약해줘.
7) 삼성전자의 반도체 업황 회복 여부를 재고·ASP·가동률 관점에서 간략한 프레임으로 판단해줘.
8) 현대차의 전기차 전략 현황과 IRA(미 인플레이션 감축법) 이슈 영향도를 핵심 포인트로 정리해줘.

---

## Strategy (시장/자산배분/섹터)
1) 현재 시장 사이클(확장/둔화/수축/회복) 추정과 그 근거(지표 3개)로 간단 제시해줘.
2) 향후 3개월 자산배분(국내주식/해외주식/채권/현금) 비중을 보수적 투자자 기준으로 제안해줘.
3) 반도체·2차전지·플랫폼 중에서 다음 분기 상대 매력도를 1–3위로 랭크하고 이유를 간단 요약해줘.
4) 코스닥 변동성이 확대될 때 사용할 수 있는 방어적 섹터 아이디어를 3개 제안해줘.
5) 배당 시즌(12월 결산) 앞두고 배당 전략 포인트 3개만 체크리스트로 알려줘.

---

## Risk (리스크 점검/경고)
포트폴리오 예시 입력 포맷(텍스트로):
```
보유:
- 삼성전자 40%
- NAVER 25%
- 카카오 15%
- 현대차 10%
- 현금 10%
```

권장 프롬프트
1) 위 포트폴리오의 집중도 리스크(상위 2종)와 상관관계 리스크를 간단 진단해줘.
2) 같은 포트폴리오에서 최대 낙폭(드로다운) 완화를 위해 즉시 가능한 액션 3가지를 제안해줘.
3) 금리 급등(50bp) 스트레스 시나리오에서 민감한 종목과 이유를 알려줘.
4) IT·커뮤니케이션 비중이 과도할 때의 리스크와 보완 섹터를 추천해줘.
5) 변동성 급등 장세에서 손절/리밸런싱 기준을 규칙 형태로 5줄 이내 정리해줘.

---

## Portfolio (구성/리밸런싱/목표)
1) 투자금 1,000만원, 중위험 중수익 목표로 국내 대형주 중심 분산 포트폴리오(5–7종) 비중을 제안해줘.
2) 위 포트폴리오의 리밸런싱 규칙(주기·허용편차·트리거)을 간단 정책으로 써줘.
3) 현금 20%를 유지하면서 배당 수익률 4% 이상 달성하도록 포트폴리오를 조정해줘.
4) 동일가중 포트폴리오 대비 섹터 편향이 큰지 여부를 한 문단으로 평가해줘.
5) 연말까지 변동성 완화를 우선 목표로, 방어 비중을 얼마까지 늘려야 할지 제안해줘.

---

## Trading/HITL (승인 유도 프롬프트)
아래 질문은 기본적으로 승인(모의/실) 플로우를 유발합니다.
1) 삼성전자 10주 시장가 매수해줘.
2) NAVER 5주 200,000원에 지정가 매수 걸어줘.
3) 카카오 20주 시장가 매도.
4) AAPL 5 shares buy at market.
5) TSLA 3 shares sell at 180.
6) NVDA 2 shares buy at 120 limit.

수정/거부 시나리오 점검용(승인 단계에서 사용):
7) 방금 주문 수정을 원해. 수량을 5주에서 3주로 바꿔줘. (결정: modified)
8) 생각 바뀌었어. 이번 주문은 취소해줘. (결정: rejected)

---

## 결합 시나리오(End-to-End)
1) “삼성전자 상세 분석해줘. 출력 형식: 요약/지표/리스크.”
2) “결론이 긍정적이라면, 100만원 내에서 매수 수량과 손절·익절 기준을 제안해줘.”
3) “제안대로 시장가 매수해줘.” → 승인 요청 수신
4) 승인(approved) 또는 수정(modified: 수량/가격) 후 재개

---

## 요청 예시(참고)
HTTP
```
POST /api/v1/chat/
Content-Type: application/json
{
  "message": "삼성전자 최근 12개월 분석과 리스크 요약해줘.\n출력 형식: 한 문단 요약, 지표 3개, 리스크 3개"
}
```

프론트(fetch)
```
fetch("http://localhost:8000/api/v1/chat/", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ message: "삼성전자 10주 시장가 매수해줘" })
}).then(r => r.json()).then(console.log)
```

승인(approve)
```
POST /api/v1/chat/approve
Content-Type: application/json
{
  "thread_id": "<conversation_id>",
  "decision": "approved"
}
```

---

## 메모
- 테스트 모드(ENV=test)에서는 Trading 프롬프트에 대해 모의 승인 요청이 생성됩니다.
- 실모드에서는 LLM/DART/네트워크 설정이 정상이어야 풍부한 응답이 생성됩니다.
- 프롬프트 끝에 출력 형식을 명시하면 더 깔끔한 결과를 받을 수 있습니다.

